'use strict';var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.patches={};$jscomp.patch=function(a,b){($jscomp.patches[a]=$jscomp.patches[a]||[]).push(b);var c=$jscomp.global;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var e=[],f=0,g=d.length;f<g;f++){var k;a:if(k=d[f],k.length<$jscomp.SYMBOL_PREFIX.length)k=!1;else{for(var l=0;l<$jscomp.SYMBOL_PREFIX.length;l++)if(k[l]!=$jscomp.SYMBOL_PREFIX[l]){k=!1;break a}k=!0}k?a.push(d[f]):e.push(d[f])}return e}};$jscomp.patch("Object.keys",b);$jscomp.patch("Object.getOwnPropertyNames",b);$jscomp.patch("Object.getOwnPropertySymbols",
function(c){return function(d){b.unused=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+a+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}};var Axis=function(){};Axis.prototype.startX=0;Axis.prototype.startY=0;Axis.prototype.endX=0;Axis.prototype.endY=0;Axis.prototype.render=function(a){console.log(this.startX)};var Chart=function(a){this.render=function(){var b=new Data;b.ajaxLoader(a,b.dataParser.bind(b));b.customSort=this.customSort}};var ChartPropertyCalculator=function(a){this.charts=a};
ChartPropertyCalculator.prototype.dataMapper=function(a,b,c,d,e){var f=[],g=[],k=[],l=[],h=e.type,q=e.yTicks[0],r=e.yTicks[e.yTicks.length-1],n=e.xTicks[0];Math.min.apply(Math,e.yData.map(chartUtilities.nullMinMapper));Math.max.apply(Math,e.yData.map(chartUtilities.nullMaxMapper));for(var m=e.xData.length-1,p=$jscomp.makeIterator(e.yTicks),t=p.next();!t.done;t=p.next()){var v=c,v=v+a/(r-q)*(t.value-q);f.push(Math.floor(v))}c=$jscomp.makeIterator(e.yData);for(p=c.next();!p.done;p=c.next())p=p.value,
""===p?k.push(""):(t=0,t+=a/(r-q)*(p-q),k.push(Math.floor(t)));if("column"===h){a=Math.floor((b-80)/(e.xData.length-1));d+=40;q=$jscomp.makeIterator(e.xData);for(h=q.next();!h.done;h=q.next())g.push(d),d+=a;for(d=0;d<=m;d++)a=40,h=(b-80)/(m-0),a=d?a+h*(d-0):a+h*(d-n),l.push(Math.floor(a))}else{a=Math.floor(b/(e.xData.length-1));q=$jscomp.makeIterator(e.xData);for(h=q.next();!h.done;h=q.next())g.push(d),d+=a;for(d=0;d<=m;d++)a=0,h=b/(m-0),a=d?a+h*(d-0):a+h*(d-n),l.push(Math.floor(a))}return new MappedChart(e.index,
e.xTitle,e.yTitle,l,k,f,g)};ChartPropertyCalculator.prototype.calculateYAxis=function(a,b,c){c="undefined"!=typeof c?c:8;var d=[];a===b&&(--a,b+=1);2>c?c=2:2<c&&(c-=2);c=(b-a)/c;var e=Math.pow(10,Math.floor(Math.log(c)/Math.LN10));c=Math.floor(c/e+.5)*e;b=c*Math.ceil(b/c);for(a=c*Math.floor(a/c);!(d.push(Math.round(1E3*(a+1E-5))/1E3),a+=c,a>b););return d};var chartUtilities={nullMinMapper:function(a){return""===a?Infinity:a},nullMaxMapper:function(a){return""===a?-Infinity:a},isSvgColliding:function(a,b){return!(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top)},getLineIntersectionPoint:function(a,b,c,d,e,f,g,k){var l,h={x:null,y:null};l=(a-c)*(f-k)-(b-d)*(e-g);if(!l)return h;h.x=((a*d-b*c)*(e-g)-(a-c)*(e*k-f*g))/l;h.y=((a*d-b*c)*(f-k)-(b-d)*(e*k-f*g))/l;return h},getInterpolatedVal:function(a,b,c,d,e){a=Number(a);c=Number(c);b=Number(b);
d=Number(d);return Math.round(100*(b+(e-a)/(c-a)*(d-b)))/100},inheritsFrom:function(a,b){a.prototype=Object.create(b.prototype)}};var ColumnChartRenderer=function(a,b){this.charts=a;this.chartProperties=b};
ColumnChartRenderer.prototype.displayCharts=function(a,b){for(var c=0;c<this.charts.length;c++){var d=Math.max.apply(Math,this.charts[c].yData.map(chartUtilities.nullMaxMapper)),e=Math.min.apply(Math,this.charts[c].yData.map(chartUtilities.nullMinMapper));if(Infinity!==e||-Infinity!==d)this.charts[c].yTicks=this.chartProperties.calculateYAxis(e,d),this.charts[c].xTicks=this.chartProperties.calculateYAxis(0,this.charts[c].xData.length),this.createDivs("chart-area")}this.createCharts(this.charts,a,
b)};ColumnChartRenderer.prototype.createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};ColumnChartRenderer.prototype.createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};
ColumnChartRenderer.prototype.drawCompleteCharts=function(a,b,c,d,e,f,g,k){var l,h=Math.ceil(g-.001*g)+55,q=Math.ceil(k-.025*k)+55;k=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var r=h-k,n=q-g,m=this.chartProperties.dataMapper(r,n,k,g,b[a]);[].push(m);var p=e.drawLineByClass(g,k-55,g,h-55,"yAxis");f.appendChild(p);p=e.drawLineByClass(g,h-55,q,h-55,"xAxis");f.appendChild(p);for(var p=$jscomp.makeIterator(m.yTicks),t=p.next();!t.done;t=p.next()){var t=t.value,v=b[a].yTicks[m.yTicks.indexOf(t)],
w=e.drawLineByClass(g-5,t-55,g,t-55,"yTick");f.appendChild(w);w=e.drawRectByClass(g,t-55,r-t+m.yTicks[0],n,"yDiv");f.appendChild(w);0==v&&(l=e.drawLineByClass(g,h-t+k-55,q,h-t+k-55,"zeroPlane"),l.setAttributeNS(null,"stroke-opacity",0),f.appendChild(l),v=0);t=e.drawTextByClass(50,h-t+k-50,v,"y-value");t.setAttributeNS(null,"text-anchor","end");f.appendChild(t)}p=e.drawRectByClass(g,k-55-40,30,n,"y-title-rect");f.appendChild(p);q=e.drawTextByClass(q/2-15,k-55-20,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+
" ("+b[a].yUnit+")","y-title");f.appendChild(q);q=$jscomp.makeIterator(m.xTicks);for(p=q.next();!p.done;p=q.next())p=p.value,t=e.drawLineByClass(p,h-55,p,h+5-55,"xTick"),f.appendChild(t),a>=c.length-d&&(t=b[a].xData[m.xTicks.indexOf(p)],p=e.drawTextByClass(p-13,h-23,t,"x-value"),f.appendChild(p));for(c=0;c<m.yData.length;c++)""!==m.yData[c]&&(e.drawCircleByClass(m.xData[c]+g,r-m.yData[c]+k-55,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[c]),d=n/m.xData.length-10,0<f.getElementsByClassName("zeroPlane").length?
(q=l.getAttributeNS(null,"y1"),d=0>b[a].yData[c]?e.drawRectByClass(m.xData[c]+g-d/2,q-1,r-m.yData[c]+k-55-q,d,"column-plot"):e.drawRectByClass(m.xData[c]+g-d/2,h-m.yData[c]-55,m.yData[c]-(h-q)+55,d,"column-plot")):d=e.drawRectByClass(m.xData[c]+g-d/2,h-m.yData[c]-55,m.yData[c],d,"column-plot"),d.setAttributeNS(null,"data-value",b[a].yData[c]),f.appendChild(d))};
ColumnChartRenderer.prototype.drawIncompleteCharts=function(a,b,c,d,e,f,g,k){var l,h;c=Math.ceil(g-.095*g)+55;h=Math.ceil(k-.025*k)+55;k=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;var q=c-k,r=h-g,n=this.chartProperties.dataMapper(q,r,k,g,b[a]);[].push(n);var m=e.drawLineByClass(g,k-15,g,c-15,"yAxis");f.appendChild(m);m=e.drawLineByClass(g,c-15,h,c-15,"xAxis");f.appendChild(m);for(var m=$jscomp.makeIterator(n.yTicks),p=m.next();!p.done;p=m.next()){var p=p.value,t=b[a].yTicks[n.yTicks.indexOf(p)],
v=e.drawLineByClass(g-5,p-15,g,p-15,"yTick");f.appendChild(v);v=e.drawRectByClass(g,p-15,q-p+n.yTicks[0],r,"yDiv");f.appendChild(v);0==t&&(l=e.drawLineByClass(g,c-p+k-15,h,c-p+k-15,"zeroPlane"),l.setAttributeNS(null,"stroke-opacity",0),f.appendChild(l),t=0);p=e.drawTextByClass(50,c-p+k-10,t,"y-value");p.setAttributeNS(null,"text-anchor","end");f.appendChild(p)}m=e.drawRectByClass(g,c-7,30,r,"y-title-rect");f.appendChild(m);h=e.drawTextByClass(h/2-15,c+15,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+
b[a].yUnit+")","y-title");f.appendChild(h);h=$jscomp.makeIterator(n.xTicks);for(m=h.next();!m.done;m=h.next())m=m.value,p=e.drawLineByClass(m,k-5-15,m,k-15,"xTick"),f.appendChild(p),a<d&&(p=b[a].xData[n.xTicks.indexOf(m)],m=e.drawTextByClass(m-13,k-35,p,"x-value"),f.appendChild(m));for(d=0;d<n.yData.length;d++)""!==n.yData[d]&&(e.drawCircleByClass(n.xData[d]+g,q-n.yData[d]+k-15,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[d]),h=r/n.xData.length-10,0<f.getElementsByClassName("zeroPlane").length?
(m=l.getAttributeNS(null,"y1"),h=0>b[a].yData[d]?e.drawRectByClass(n.xData[d]+g-h/2,m-1,q-n.yData[d]+k-15-m,h,"column-plot"):e.drawRectByClass(n.xData[d]+g-h/2,c-n.yData[d]-15,n.yData[d]-(c-m)+15,h,"column-plot")):h=e.drawRectByClass(n.xData[d]+g-h/2,c-n.yData[d]-15,n.yData[d],h,"column-plot"),h.setAttributeNS(null,"data-value",b[a].yData[d]),f.appendChild(h))};
ColumnChartRenderer.prototype.createCharts=function(a,b,c){var d,e=new SvgHelper,f=Math.floor(window.innerWidth/(c+55)),g=document.getElementsByClassName("multi-chart");d=g.length%f?!1:!0;for(var k=0;k<g.length;k++){var l=e.createSvgByClass(b+55,c+55,"chart-svg");d?this.drawCompleteCharts(k,a,g,f,e,l,b,c):this.drawIncompleteCharts(k,a,g,f,e,l,b,c);g[k].appendChild(l);for(var l=l.getElementsByClassName("x-value"),h=0;h<l.length;h++){var q=e.getRotationPoint(l[h]);l[h].setAttributeNS(null,"transform",
"rotate(270 "+q+")")}}};var Data=function(){this.type=this.width=this.height=this.subCaption=this.caption="";this.chartData=[]};Data.prototype.ajaxLoader=function(a,b){var c=new XMLHttpRequest;if(!c)return console.log("Unable to create XMLHTTP instance."),!1;c.open("POST",a,!0);c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?b(JSON.parse(c.responseText)):console.log("There was a problem with the request"))};c.send()};
Data.prototype.dataParser=function(a){this.caption=a.metadata.caption;this.subCaption=a.metadata.subCaption;this.height=a.metadata.height;this.width=a.metadata.width;this.type=a.metadata.type;this.sortBy=a.metadata.sortBy;this.sortOrder=a.metadata.sortOrder;for(var b=Object.keys(a.data),c=b.length-1,d=1;d<=c;d++){var e=a.data[b[0]].split(","),f=a.data[b[d]].split(",").map(this.numberMapper);if(!this.allSame(f,"")){var g=a.metadata.units.split(","),e=new MultiVarChart(d,this.type,b[0],b[d],e,f,g[0],
g[d]);this.chartData.push(e)}}"function"==typeof this.customSort?this.customSort():this.sortData(this.sortBy);a=new ChartPropertyCalculator(this.chartData);"line"===this.type?(a=new LineChartRenderer(this.chartData,a),a.createCaptions("chart-area",this.caption,this.subCaption),a.displayCharts(this.height,this.width)):"column"===this.type?(a=new ColumnChartRenderer(this.chartData,a),a.createCaptions("chart-area",this.caption,this.subCaption),a.displayCharts(this.height,this.width)):console.log("Sorry Dave. I can't let you do that.");
(new EventAgents(this.type)).crosshairHandler(document.getElementsByClassName("chart-svg"))};Data.prototype.sortData=function(a){switch(a){case "average":this.sortByAverage();break;case "value":this.sortByValue();break;default:console.log("default")}};
Data.prototype.sortByAverage=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),c=b.next();!c.done;c=b.next()){for(var d=0,e=0,c=$jscomp.makeIterator(c.value.yData),f=c.next();!f.done;f=c.next())f=f.value,""!==f&&(d+=f,e++);a.push(d/e)}this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};
Data.prototype.sortByValue=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),c=b.next();!c.done;c=b.next())a.push(Math.max.apply(Math,c.value.yData));this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};
Data.prototype.multiSort=function(a,b,c){var d=[],e;for(e in b)d.push({sort:b[e],support:a[e]});"descending"==c?d.sort(function(a,b){return a.support>b.support?-1:a.support==b.support?0:1}):"ascending"==c&&d.sort(function(a,b){return a.support<b.support?-1:a.support==b.support?0:1});for(a=0;a<d.length;a++)b[a]=d[a].sort;return b};Data.prototype.allSame=function(a,b){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c.value!==b)return!1;return!0};
Data.prototype.numberMapper=function(a){return""===a?"":Number(a)};var EventAgents=function(a){this.chartType=a;this.svgHelper=new SvgHelper;document.getElementsByClassName("graphCircle")[0]&&(this.defaultAnchorStroke=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).stroke,this.defaultAnchorFill=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).fill);document.getElementsByClassName("column-plot")[0]&&(this.defaultPlotFill=getComputedStyle(document.getElementsByClassName("column-plot")[0]).fill)};
EventAgents.prototype.createCrosshair=function(a){var b=a.target.getBoundingClientRect().left;a=new CustomEvent("crosshairCreateEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.createOtherCrosshairs=function(a){var b=Number(a.target.getAttributeNS(null,"height"));a.target.getAttributeNS(null,"x");var c=Number(a.target.getAttributeNS(null,"y"));b&&(c=this.svgHelper.drawLineByClass(a.detail,c,a.detail,b+c,"otherCrosshair"),a.target.parentNode.insertBefore(c,a.target),c=this.svgHelper.drawRectByClass(a.detail,b,20,60,"otherTooltipBg"),c.setAttributeNS(null,"rx",2),c.setAttributeNS(null,"ry",2),c.style.visibility="hidden",a.target.parentNode.insertBefore(c,
a.target),b=this.svgHelper.drawTextByClass(a.detail,b,"","otherTooltip"),b.style.visibility="hidden",a.target.parentNode.insertBefore(b,a.target))};EventAgents.prototype.moveCrosshair=function(a){var b=a.target.getBoundingClientRect().left;a=new CustomEvent("crosshairMoveEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.moveOtherCrosshairs=function(a){var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("otherTooltipBg"),e=a.target.parentNode.getElementsByClassName("graphCircle"),f=a.target.parentNode.getElementsByClassName("graphLine");getComputedStyle(e[0]);var g,k,l,h,q,r,n,m,p,t,v,w;b[0].setAttributeNS(null,"x1",a.detail-9);b[0].setAttributeNS(null,"x2",a.detail-9);t=b[0].getBoundingClientRect();
r=b[0].getAttributeNS(null,"x1");n=b[0].getAttributeNS(null,"y1");m=b[0].getAttributeNS(null,"x2");p=b[0].getAttributeNS(null,"y2");if(b[0].getBoundingClientRect().left<e[0].getBoundingClientRect().left||b[0].getBoundingClientRect().right>e[e.length-1].getBoundingClientRect().right)c[0].style.visibility="hidden",d[0].style.visibility="hidden",e[0].style.stroke=this.defaultAnchorStroke,e[e.length-1].style.stroke=this.defaultAnchorStroke,e[0].setAttributeNS(null,"r",4),e[e.length-1].setAttributeNS(null,
"r",4);else{for(var u=1;u<e.length;u++)g=f[u-1].getBoundingClientRect(),k=f[u-1].getAttributeNS(null,"x1"),l=f[u-1].getAttributeNS(null,"y1"),h=f[u-1].getAttributeNS(null,"x2"),q=f[u-1].getAttributeNS(null,"y2"),w=e[u].getAttributeNS(null,"data-value"),v=e[u-1].getAttributeNS(null,"data-value"),chartUtilities.isSvgColliding(g,t)&&(g=chartUtilities.getLineIntersectionPoint(r,n,m,p,k,l,h,q),k=chartUtilities.getInterpolatedVal(k,v,h,w,g.x),c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",
g.x+6),c[0].setAttributeNS(null,"y",g.y+20),c[0].textContent=k,d[0].style.visibility="initial",d[0].setAttributeNS(null,"x",g.x+4),d[0].setAttributeNS(null,"y",g.y+5),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6));for(u=0;u<e.length;u++)f=e[u].getBBox(),m=e[u].getBoundingClientRect(),r=a.target.getBoundingClientRect(),n=b[0].getBoundingClientRect(),chartUtilities.isSvgColliding(m,n)?(c[0].style.visibility="initial",d[0].style.visibility="initial",n=f.x+f.width+5,p=f.x+f.width+3,
m=f.y+2*f.height,t=f.y+f.height-3,n+f.width>r.right&&(n-=5*f.width-5,p-=5*f.width-5),c[0].setAttributeNS(null,"x",n),c[0].setAttributeNS(null,"y",m+3),c[0].textContent=e[u].getAttributeNS(null,"data-value"),e[u].setAttributeNS(null,"r",5),e[u].style.stroke="#f15c5c",d[0].setAttributeNS(null,"x",p),d[0].setAttributeNS(null,"y",t),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6)):(e[u].setAttributeNS(null,"r",4),e[u].style.stroke=this.defaultAnchorStroke)}};
EventAgents.prototype.removeCrosshair=function(a){a=new Event("crosshairRemoveEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.removeOtherCrosshairs=function(a){for(var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("graphCircle"),e=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),f=b.next();!f.done;f=b.next())a.target.parentNode.removeChild(f.value);d=$jscomp.makeIterator(d);for(b=d.next();!b.done;b=d.next())b=b.value,b.style.stroke=this.defaultAnchorStroke,
b.setAttributeNS(null,"r",4);c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())a.target.parentNode.removeChild(d.value);e=$jscomp.makeIterator(e);for(c=e.next();!c.done;c=e.next())a.target.parentNode.removeChild(c.value)};
EventAgents.prototype.prepPlot=function(a){var b=a.target.getBoundingClientRect().left,c=a.target.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x");a=new CustomEvent("plotLightEvent",{detail:{mousex:a.clientX-b+62,mousey:a.clientY-c+3,hoveredPlotX:d}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.prepAllPlots=function(a){var b;a.target.getAttributeNS(null,"height");a.target.getAttributeNS(null,"x");a.target.getAttributeNS(null,"y");a.target.getBBox().x==a.detail.hoveredPlotX&&(a.target.style.fill="#b94748");b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,20,60,"otherTooltipBg");b.setAttributeNS(null,"rx",2);b.setAttributeNS(null,"ry",2);b.style.visibility="hidden";a.target.parentNode.appendChild(b);b=this.svgHelper.drawTextByClass(a.detail.mousex,a.detail.mousey,
"","otherTooltip");a.target.parentNode.appendChild(b)};EventAgents.prototype.prepTooltips=function(a){var b=a.target.parentNode.getBoundingClientRect().left,c=a.target.parentNode.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x");a=new CustomEvent("tooltipMoveEvent",{detail:{mousex:a.clientX-b-15,mousey:a.clientY-c+15,hoveredPlotX:d}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.moveTooltips=function(a){a.target.getBoundingClientRect();var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg");a.target.getBBox().x==a.detail.hoveredPlotX&&(c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",a.detail.mousex),c[0].setAttributeNS(null,"y",a.detail.mousey),b[0].textContent=a.target.getAttributeNS(null,"data-value"),b[0].setAttributeNS(null,"x",a.detail.mousex+5),b[0].setAttributeNS(null,
"y",a.detail.mousey+15),c[0].setAttributeNS(null,"width",b[0].getComputedTextLength()+10))};EventAgents.prototype.unprepPlot=function(a){a=new Event("unprepPlotEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.unprepAllPlots=function(a){"rgb(185, 71, 72)"===a.target.style.fill&&(a.target.style.fill=this.defaultPlotFill);for(var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),d=b.next();!d.done;d=b.next())a.target.parentNode.removeChild(d.value);c=$jscomp.makeIterator(c);for(b=c.next();!b.done;b=c.next())a.target.parentNode.removeChild(b.value)};
EventAgents.prototype.dragSelect=function(a){var b=a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customDragSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};
EventAgents.prototype.customDragSelect=function(a){for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=b.next())c.value.style.fill=this.defaultPlotFill;b=$jscomp.makeIterator(document.getElementsByClassName("graphCircle"));for(c=b.next();!c.done;c=b.next())c.value.style.fill=this.defaultAnchorFill;a.target.onmousemove=this.expandSelect;a.target.onmouseup=this.selectPlots;b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,5,5,"select-box");
b.setAttributeNS(null,"fill","red");b.setAttributeNS(null,"fill-opacity",.4);a.target.appendChild(b)};EventAgents.prototype.expandSelect=function(a){var b=a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customExpandSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};
EventAgents.prototype.customExpandSelect=function(a){var b=a.target.parentNode;b.getBoundingClientRect();for(var b=b.getElementsByClassName("select-box"),c=a.target.parentNode.getElementsByClassName("column-plot"),d=a.target.parentNode.getElementsByClassName("graphCircle"),e=$jscomp.makeIterator(b),f=e.next();!f.done;f=e.next()){f=f.value;f.setAttributeNS(null,"width",a.detail.mousex);f.setAttributeNS(null,"height",a.detail.mousey);for(var f=$jscomp.makeIterator(c),g=f.next();!g.done;g=f.next())g=
g.value,chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),g.getBoundingClientRect())&&(g.style.fill="#b94749");f=$jscomp.makeIterator(d);for(g=f.next();!g.done;g=f.next())g=g.value,chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),g.getBoundingClientRect())&&(g.style.fill="#b94749")}};EventAgents.prototype.selectPlots=function(a){a=new Event("customSelectPlots");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-svg")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.customSelectPlots=function(a){a.target.onmouseup=null;a.target.onmousemove=null;var b=document.getElementsByClassName("select-box");a.target.removeChild(b[0])};
EventAgents.prototype.crosshairHandler=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;if("column"===this.chartType)for(var c=$jscomp.makeIterator(b.getElementsByClassName("column-plot")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.prepPlot),d.addEventListener("plotLightEvent",this.prepAllPlots.bind(this)),d.addEventListener("mousemove",this.prepTooltips),d.addEventListener("tooltipMoveEvent",this.moveTooltips.bind(this)),d.addEventListener("mouseleave",
this.unprepPlot),d.addEventListener("unprepPlotEvent",this.unprepAllPlots.bind(this));else if("line"===this.chartType)for(c=$jscomp.makeIterator(b.getElementsByClassName("chart-rect")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.createCrosshair),d.addEventListener("crosshairCreateEvent",this.createOtherCrosshairs.bind(this)),d.addEventListener("mousemove",this.moveCrosshair),d.addEventListener("crosshairMoveEvent",this.moveOtherCrosshairs.bind(this)),d.addEventListener("mouseleave",
this.removeCrosshair),d.addEventListener("crosshairRemoveEvent",this.removeOtherCrosshairs.bind(this));b.addEventListener("mousedown",this.dragSelect);b.addEventListener("customDragSelect",this.customDragSelect.bind(this));b.addEventListener("customExpandSelect",this.customExpandSelect.bind(this));b.addEventListener("customSelectPlots",this.customSelectPlots.bind(this))}};var LineChartRenderer=function(a,b){this.charts=a;this.chartProperties=b};
LineChartRenderer.prototype.displayCharts=function(a,b){for(var c=0;c<this.charts.length;c++){var d=Math.max.apply(Math,this.charts[c].yData.map(chartUtilities.nullMaxMapper)),e=Math.min.apply(Math,this.charts[c].yData.map(chartUtilities.nullMinMapper));if(Infinity!==e||-Infinity!==d)this.charts[c].yTicks=this.chartProperties.calculateYAxis(e,d),this.charts[c].xTicks=this.chartProperties.calculateYAxis(0,this.charts[c].xData.length),this.createDivs("chart-area")}this.createCharts(this.charts,a,b)};
LineChartRenderer.prototype.createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};LineChartRenderer.prototype.createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};
LineChartRenderer.prototype.drawCompleteCharts=function(a,b,c,d,e,f,g,k){var l=Math.ceil(g-.001*g)+55,h=Math.ceil(k-.025*k)+55;k=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var q=l-k,r=h-g,n=this.chartProperties.dataMapper(q,r,k,g,b[a]);[].push(n);var m=new YAxis;m.startX=g;m.startY=k-55;m.endX=g;m.endY=l-55;m.render();m=e.drawLineByClass(g,k-55,g,l-55,"yAxis");f.appendChild(m);m=e.drawLineByClass(h,l-55,g,l-55,"xAxis");f.appendChild(m);h=e.drawTextByClass(h/2-15,k-55-20,""===b[a].yUnit?b[a].yTitle:
b[a].yTitle+" ("+b[a].yUnit+")","y-title");m=e.drawRectByClass(g,k-55-40,30,r,"y-title-rect");f.appendChild(m);f.appendChild(h);h=$jscomp.makeIterator(n.xTicks);for(m=h.next();!m.done;m=h.next()){var m=m.value,p=e.drawLineByClass(m,l-55,m,l+5-55,"xTick");f.appendChild(p);a>=c.length-d&&(p=b[a].xData[n.xTicks.indexOf(m)],m=e.drawTextByClass(m-13,l-23,p,"x-value"),f.appendChild(m))}c=$jscomp.makeIterator(n.yTicks);for(d=c.next();!d.done;d=c.next())d=d.value,h=e.drawLineByClass(g-5,d-55,g,d-55,"yTick"),
f.appendChild(h),h=e.drawRectByClass(g,d-55,q-d+n.yTicks[0],r,"yDiv"),f.appendChild(h),h=b[a].yTicks[n.yTicks.indexOf(d)],d=e.drawTextByClass(50,l-d+k-50,h,"y-value"),d.setAttributeNS(null,"text-anchor","end"),f.appendChild(d);for(l=0;l<n.yData.length-1;l++)if(c=0,""!==n.yData[l+1]&&""!==n.yData[l])c=e.drawLineByClass(n.xData[l]+g,q-n.yData[l]+k-55,n.xData[l+1]+g,q-n.yData[l+1]+k-55,"graphLine"),f.appendChild(c);else if(""!==n.yData[l])for(d=l+2;d<n.yData.length;d++)if(l++,c++,""!==n.yData[d]){c=
e.drawLineByClass(n.xData[l-c]+g,q-n.yData[l-c]+k-55,n.xData[d]+g,q-n.yData[d]+k-55,"graphLine inferredLine");f.appendChild(c);break}for(l=0;l<n.yData.length;l++)""!==n.yData[l]&&(c=e.drawCircleByClass(n.xData[l]+g,q-n.yData[l]+k-55,4,"graphCircle"),c.setAttributeNS(null,"data-value",b[a].yData[l]),f.appendChild(c));a=e.drawRectByClass(g,k-55,q,r,"chart-rect");a.setAttributeNS(null,"fill-opacity",0);f.appendChild(a)};
LineChartRenderer.prototype.drawIncompleteCharts=function(a,b,c,d,e,f,g,k){var l=Math.ceil(g-.095*g)+55,h=Math.ceil(k-.025*k)+55;k=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;c=l-k;var q=h-g,r=this.chartProperties.dataMapper(c,q,k,g,b[a]);[].push(r);var n=e.drawLineByClass(g,k-15,g,l-15,"yAxis");f.appendChild(n);n=e.drawLineByClass(h,l-15,g,l-15,"xAxis");f.appendChild(n);for(var n=$jscomp.makeIterator(r.yTicks),m=n.next();!m.done;m=n.next()){var m=m.value,p=e.drawLineByClass(g-5,m-15,g,m-15,
"yTick");f.appendChild(p);p=e.drawRectByClass(g,m-15,c-m+r.yTicks[0],q,"yDiv");f.appendChild(p);p=b[a].yTicks[r.yTicks.indexOf(m)];m=e.drawTextByClass(50,l-m+k-10,p,"y-value");m.setAttributeNS(null,"text-anchor","end");f.appendChild(m)}n=e.drawRectByClass(g,l-7,30,q,"y-title-rect");f.appendChild(n);l=e.drawTextByClass(h/2-15,l+15,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");f.appendChild(l);l=$jscomp.makeIterator(r.xTicks);for(h=l.next();!h.done;h=l.next())h=h.value,n=e.drawLineByClass(h,
k-5-15,h,k-15,"xTick"),f.appendChild(n),a<d&&(n=b[a].xData[r.xTicks.indexOf(h)],h=e.drawTextByClass(h-13,k-35,n,"x-value"),f.appendChild(h));for(d=0;d<r.yData.length-1;d++)if(l=0,""!==r.yData[d+1]&&""!==r.yData[d])l=e.drawLineByClass(r.xData[d]+g,c-r.yData[d]+k-15,r.xData[d+1]+g,c-r.yData[d+1]+k-15,"graphLine"),f.appendChild(l);else if(""!==r.yData[d])for(h=d+2;h<r.yData.length;h++)if(d++,l++,""!==r.yData[h]){l=e.drawLineByClass(r.xData[d-l]+g,c-r.yData[d-l]+k-15,r.xData[h]+g,c-r.yData[h]+k-15,"graphLine inferredLine");
f.appendChild(l);break}for(d=0;d<r.yData.length;d++)""!==r.yData[d]&&(l=e.drawCircleByClass(r.xData[d]+g,c-r.yData[d]+k-15,4,"graphCircle"),l.setAttributeNS(null,"data-value",b[a].yData[d]),f.appendChild(l));a=e.drawRectByClass(g,k-15,c,q,"chart-rect");a.setAttributeNS(null,"fill-opacity",0);f.appendChild(a)};
LineChartRenderer.prototype.createCharts=function(a,b,c){var d,e=new SvgHelper,f=Math.floor(window.innerWidth/(c+55)),g=document.getElementsByClassName("multi-chart");d=g.length%f?!1:!0;for(var k=0;k<g.length;k++){var l=e.createSvgByClass(b+55,c+55,"chart-svg");d?this.drawCompleteCharts(k,a,g,f,e,l,b,c):this.drawIncompleteCharts(k,a,g,f,e,l,b,c);g[k].appendChild(l);for(var l=l.getElementsByClassName("x-value"),h=0;h<l.length;h++){var q=e.getRotationPoint(l[h]);l[h].setAttributeNS(null,"transform",
"rotate(270 "+q+")")}}};var MappedChart=function(a,b,c,d,e,f,g){this.index=a;this.xTitle=b;this.yTitle=c;this.xData=d;this.yData=e;this.yTicks=f;this.xTicks=g};var MultiVarChart=function(a,b,c,d,e,f,g,k){this.index=a;this.type=b;this.xTitle=c;this.yTitle=d;this.xData=e;this.yData=f;this.xUnit=g;this.yUnit=k};var SvgHelper=function(){this.svgns="http://www.w3.org/2000/svg"};SvgHelper.prototype.createSvgByClass=function(a,b,c){var d=document.createElementNS(this.svgns,"svg");d.setAttributeNS(null,"height",a+"px");d.setAttributeNS(null,"width",b+"px");d.setAttributeNS(null,"version","1.1");d.setAttributeNS(null,"class",c);return d};
SvgHelper.prototype.drawLineByClass=function(a,b,c,d,e){var f=document.createElementNS(this.svgns,"line");f.setAttributeNS(null,"x1",a);f.setAttributeNS(null,"y1",b);f.setAttributeNS(null,"x2",c);f.setAttributeNS(null,"y2",d);f.setAttributeNS(null,"stroke","black");f.setAttributeNS(null,"class",e);return f};
SvgHelper.prototype.drawTextByClass=function(a,b,c,d){var e=document.createElementNS(this.svgns,"text");e.setAttributeNS(null,"x",a);e.setAttributeNS(null,"y",b);e.setAttributeNS(null,"class",d);e.setAttributeNS(null,"stroke","black");e.textContent=c;return e};
SvgHelper.prototype.drawRectByClass=function(a,b,c,d,e){var f=document.createElementNS(this.svgns,"rect");f.setAttributeNS(null,"x",a);f.setAttributeNS(null,"y",b);f.setAttributeNS(null,"height",c);f.setAttributeNS(null,"width",d);f.setAttributeNS(null,"class",e);f.setAttributeNS(null,"fill","white");return f};
SvgHelper.prototype.drawCircleByClass=function(a,b,c,d){var e=document.createElementNS(this.svgns,"circle");e.setAttributeNS(null,"cx",a);e.setAttributeNS(null,"cy",b);e.setAttributeNS(null,"r",c+"px");e.setAttributeNS(null,"class",d);return e};SvgHelper.prototype.getRotationPoint=function(a){a=a.getBBox();return a.x+14+", "+(a.y+a.height/2)};var XAxis=function(){Axis.call(this)};chartUtilities.inheritsFrom(XAxis,Axis);var YAxis=function(){Axis.call(this)};chartUtilities.inheritsFrom(YAxis,Axis);

//# sourceMappingURL=chart.min.js.map
