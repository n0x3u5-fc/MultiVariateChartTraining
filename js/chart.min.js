'use strict';var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.patches={};$jscomp.patch=function(a,b){($jscomp.patches[a]=$jscomp.patches[a]||[]).push(b);var c=$jscomp.global;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol;var a=[],b=function(c){return function(b){a=[];b=c(b);for(var e=[],f=0,g=b.length;f<g;f++){var h;a:if(h=b[f],h.length<$jscomp.SYMBOL_PREFIX.length)h=!1;else{for(var k=0;k<$jscomp.SYMBOL_PREFIX.length;k++)if(h[k]!=$jscomp.SYMBOL_PREFIX[k]){h=!1;break a}h=!0}h?a.push(b[f]):e.push(b[f])}return e}};$jscomp.patch("Object.keys",b);$jscomp.patch("Object.getOwnPropertyNames",b);$jscomp.patch("Object.getOwnPropertySymbols",
function(c){return function(d){b.unused=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+a+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}};var Chart=function(a){this.render=function(){var b=new Data;b.ajaxLoader(a,b.dataParser.bind(b));this.customSort&&(b.customSort=this.customSort)}};(function(){Chart.Axis=function(a,b,c,d,e,f){this.startX=a;this.startY=b;this.endX=c;this.endY=d;this.className=e;this.svgHelper=new SvgHelper;this.columnsAreComplete=f};Chart.Axis.prototype.render=function(a){var b=this.svgHelper.drawLineByClass(this.startX,this.startY,this.endX,this.endY,this.className);a.appendChild(b)}})();var BarChartRenderer=function(a,b){this.BarChartRenderer$charts=a;this.BarChartRenderer$chartProperties=b};
BarChartRenderer.prototype.displayHeaders=function(a,b,c){var d,e=new SvgHelper,f=$jscomp.makeIterator(c);for(d=f.next();!d.done;d=f.next()){d=d.value;this.BarChartRenderer_prototype$createDivs("chart-area");var g=e.createSvgByClass(a,b,"header-svg"),h=document.getElementsByClassName("multi-chart-header");Array.from(h).map(function(a,b){a.style.borderBottom="1px solid black";0<b&&(a.style.borderRight="1px solid black");a.appendChild(g)});d=1<c.indexOf(d)?e.drawTextByClass(Math.floor(b/2-2*d.length),
16,d,"header"):e.drawTextByClass(16,16,d,"header");g.appendChild(d)}};BarChartRenderer.prototype.drawRowName=function(a,b,c,d,e,f,g,h){b=Math.floor(0);var k=Math.floor(1);e=this.BarChartRenderer$chartProperties.dataMapper(Math.ceil(e)-b,Math.ceil(f)-k,b,k,a[0]);[].push(e);c=c.drawTextByClass(16,e.xTicks[0]+8,a[g].category,"category-text");d.appendChild(c);d.setAttributeNS(null,"class","row-category");g!==a.length-1&&h!==this.totalRows-1&&(d.style.borderBottom="1px solid black")};
BarChartRenderer.prototype.drawYLabels=function(a,b,c,d,e,f,g,h){b=Math.floor(0);var k=Math.floor(1);e=this.BarChartRenderer$chartProperties.dataMapper(Math.ceil(e)-b,Math.ceil(f)-k,b,k,a[0]);[].push(e);f=$jscomp.makeIterator(e.xTicks);for(b=f.next();!b.done;b=f.next())b=b.value,k=a[g].xData[e.xTicks.indexOf(b)],b=c.drawTextByClass(16,b+8,k,"y-value"),d.appendChild(b);d.setAttributeNS(null,"class","y-labels");g!==a.length-1&&h!==this.totalRows-1&&(d.style.borderBottom="1px solid black")};
BarChartRenderer.prototype.drawX=function(a,b,c,d){var e=[],f=Math.ceil(b),g=Math.floor(0),h=Math.floor(1),k=Math.ceil(a)-g,n=f-h,q=new SvgHelper,p=this.BarChartRenderer$chartProperties.dataMapper(k,n,g,h,this.BarChartRenderer$charts[0]);[].push(p);for(var g=$jscomp.makeIterator(c),l=g.next();!l.done;l=g.next()){var l=l.value,m=document.createElement("span");m.setAttribute("class","multi-chart-footer");m.style.display="inline-block";document.getElementById("chart-area").appendChild(m);var r=q.createSvgByClass(a,
b,"footer-svg"),m=document.getElementsByClassName("multi-chart-footer"),u=new Chart.XAxis(h,0,f,0,"xAxis",!0);u.type="numeric";Array.from(m).map(function(a,b){a.style.borderTop="1px solid black";0<b&&(a.style.borderRight="1px solid black");a.appendChild(r)});var m=document.getElementsByClassName("footer-svg"),t=this;Array.from(m).map(function(a,b){if(1<b)for(u.renderTicks(r,p.yTicks),a=$jscomp.makeIterator(t.BarChartRenderer$charts[0].yTicks),b=a.next();!b.done;b=a.next())e.push(chartUtilities.shortenLargeNumber(b.value,
2))});u.chartVis="crosstabs";u.renderTickValues(r,p.yTicks,e);1<c.indexOf(l)&&(l=q.drawTextByClass(n/2-3*d.length,k/1.2,d,"x-title"),r.appendChild(l))}};
BarChartRenderer.prototype.BarChartRenderer_prototype$displayCharts=function(a,b,c){var d=-Infinity,e=Infinity;this.BarChartRenderer_prototype$createDivs("chart-area",c);this.BarChartRenderer_prototype$createDivs("chart-area",c);for(var f=0;f<this.BarChartRenderer$charts.length;f++){var g=Math.max.apply(Math,this.BarChartRenderer$charts[f].yData.map(chartUtilities.nullMaxMapper)),h=Math.min.apply(Math,this.BarChartRenderer$charts[f].yData.map(chartUtilities.nullMinMapper));g>d&&(d=g);h<e&&(e=h);Infinity===
e&&-Infinity===d||this.BarChartRenderer_prototype$createDivs("chart-area",c)}for(f=0;f<this.BarChartRenderer$charts.length;f++)if(Infinity!==e||-Infinity!==d)this.BarChartRenderer$charts[f].yTicks=this.BarChartRenderer$chartProperties.calculateYAxis(this.BarChartRenderer$charts[0].minY,this.BarChartRenderer$charts[0].maxY),this.BarChartRenderer$charts[f].xTicks=this.BarChartRenderer$chartProperties.calculateYAxis(this.BarChartRenderer$charts[0].minY,this.BarChartRenderer$charts[0].maxY);this.BarChartRenderer_prototype$createCharts(this.BarChartRenderer$charts,
a,b,c)};BarChartRenderer.prototype.BarChartRenderer_prototype$createDivs=function(a,b){var c=document.createElement("span");void 0!==b?c.setAttribute("class","multi-chart"+b):c.setAttribute("class","multi-chart-header");c.style.display="inline-block";document.getElementById(a).appendChild(c)};
BarChartRenderer.prototype.colorPlots=function(a){var b,c,d=document.getElementsByClassName("chart-svg"),e=this,f=a.filter(function(a){return 0>a?!0:!1}),g=Math.max.apply(Math,f)-Math.min.apply(Math,f);a=a.filter(function(a){return 0<=a?!0:!1});var h=Math.max.apply(Math,a)-Math.min.apply(Math,a);Array.from(d).map(function(a,d){a=a.getElementsByClassName("bar-plot");Array.from(a).map(function(a,d,f){d=Number(a.getAttributeNS(null,"data-criteria"));0>d?(c=d/g,b=chartUtilities.generateColor(e.negativeColor,
e.negativeColorEnd,c)):(c=d/h,b=chartUtilities.generateColor(e.plotColor,e.plotColorEnd,c));a.setAttributeNS(null,"fill",b)})})};
BarChartRenderer.prototype.BarChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,e,f,g,h,k,n){var q,p=[],l=Math.ceil(g),m=Math.ceil(h);h=Math.floor(0);g=Math.floor(1);var r=l-h,u=m-g,t=this.BarChartRenderer$chartProperties.dataMapper(r,u,h,g,b[a]);[].push(t);var w=new Chart.YAxis(g,h,g,l,"yAxis",k);w.type="category";w.renderZeroPlane(f,t.yTicks,b[a].yTicks,u);k=new Chart.XAxis(m,l,g,l,"xAxis",k);k.type="numeric";n!==this.totalRows-1&&k.render(f);if(a>=c.length-d)for(c=$jscomp.makeIterator(b[a].yTicks),
d=c.next();!d.done;d=c.next())p.push(chartUtilities.shortenLargeNumber(d.value,2));e.drawRectByClass(g,h-40,30,u,"y-title-rect");e.drawTextByClass(m/2-15,h-20,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");for(p=0;p<t.yData.length;p++)""!==t.yData[p]&&(e.drawCircleByClass(t.yData[p]+g,t.xData[p]+h,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[p]),c=r/t.xData.length-13,27<c&&(c=27),0<f.getElementsByClassName("zeroPlane").length||(q=b[a].yData.filter(function(a){return 0===
a?!0:!1}),2>t.yData[p]&&0===q.length&&(t.yData[p]=2),q=e.drawRectByClass(g-1,t.xData[p]+h-c/2,c,t.yData[p],"bar-plot")),q.setAttributeNS(null,"data-criteria",b[a].colorCriteria[p]),q.setAttributeNS(null,"data-value",b[a].yData[p]),f.appendChild(q))};
BarChartRenderer.prototype.BarChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,e,f,g,h,k){c=Math.ceil(g-.095*g)+55;var n=Math.ceil(h-.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;var q=c-h,p=n-g,l=this.BarChartRenderer$chartProperties.dataMapper(q,p,h,g,b[a]);[].push(l);var m=new Chart.YAxis(g,h-15,g,c-15,"yAxis",k);m.render(f);m.renderTicks(f,l.yTicks);m.renderTickValues(f,l.yTicks,b[a].yTicks);m.renderDivs(f,l.yTicks,q,g,p);m.renderZeroPlane(f,l.yTicks,b[a].yTicks,
p);k=new Chart.XAxis(g,h-15,g,h-15,"xAxis",k);k.render(f);k.renderTicks(f,l.xTicks);a<d&&k.renderTickValues(f,l.xTicks,b[a].xData);d=e.drawRectByClass(g,c-7,30,p,"y-title-rect");f.appendChild(d);d=e.drawTextByClass(n/2-15,c+15,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");f.appendChild(d);for(d=0;d<l.yData.length;d++)""!==l.yData[d]&&(e.drawCircleByClass(l.xData[d]+g,q-l.yData[d]+h-15,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[d]),k=p/l.xData.length-10,0<
f.getElementsByClassName("zeroPlane").length?(n=f.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,"y1"),k=0>b[a].yData[d]?e.drawRectByClass(l.xData[d]+g-k/2,n-1,q-l.yData[d]+h-15-n,k,"column-plot"):e.drawRectByClass(l.xData[d]+g-k/2,c-l.yData[d]-15,l.yData[d]-(c-n)+15,k,"column-plot")):k=e.drawRectByClass(l.xData[d]+g-k/2,c-l.yData[d]-15,l.yData[d],k,"column-plot"),k.setAttributeNS(null,"data-value",b[a].yData[d]),f.appendChild(k))};
BarChartRenderer.prototype.BarChartRenderer_prototype$createCharts=function(a,b,c,d){for(var e=new SvgHelper,f=Math.floor(window.innerWidth/c),g=document.getElementsByClassName("multi-chart"+d),h=0;h<g.length;h++){var k=e.createSvgByClass(b,c,"chart-svg");h?1===h?this.drawYLabels(a,g,e,k,b,c,h,d):this.BarChartRenderer_prototype$drawCompleteCharts(h-2,a,g,f,e,k,b,c,!0,d):this.drawRowName(a,g,e,k,b,c,h,d);g[h].appendChild(k);0<h&&(g[h].style.borderRight="1px solid black");for(var k=k.getElementsByClassName("x-value"),
n=0;n<k.length;n++){var q=e.getRotationPoint(k[n]);k[n].setAttributeNS(null,"transform","rotate(270 "+q+")")}}};var ChartPropertyCalculator=function(a){this.ChartPropertyCalculator$charts=a};
ChartPropertyCalculator.prototype.dataMapper=function(a,b,c,d,e){var f=[],g=[],h=[],k=[],n=e.type,q=e.vis,p=e.yTicks[0],l=e.yTicks[e.yTicks.length-1],m=e.xTicks[0];Math.min.apply(Math,e.yData.map(chartUtilities.nullMinMapper));Math.max.apply(Math,e.yData.map(chartUtilities.nullMaxMapper));var r=e.xData.length-1;if("trellis"===q){for(var q=$jscomp.makeIterator(e.yTicks),u=q.next();!u.done;u=q.next()){var u=u.value,t=c,w=a/(l-p),t=t+w*(u-p);f.push(Math.floor(t))}c=$jscomp.makeIterator(e.yData);for(q=
c.next();!q.done;q=c.next())q=q.value,""===q?h.push(""):(u=0,t=a/(l-p),u+=t*(q-p),h.push(Math.floor(u)));if("column"===n){n=Math.floor((b-80)/(e.xData.length-1));c=d+40;a=$jscomp.makeIterator(e.xData);for(d=a.next();!d.done;d=a.next())g.push(c),c+=n;for(c=0;c<=r;c++)d=40,n=(b-80)/(r-0),d=c?d+n*(c-0):d+n*(c-m),k.push(Math.floor(d))}else if("line"===n){n=Math.floor(b/(e.xData.length-1));c=d;a=$jscomp.makeIterator(e.xData);for(d=a.next();!d.done;d=a.next())g.push(c),c+=n;for(c=0;c<=r;c++)d=0,n=b/(r-
0),d=c?d+n*(c-0):d+n*(c-m),k.push(Math.floor(d))}}else if("crosstab"===q){m=$jscomp.makeIterator(e.yTicks);for(u=m.next();!u.done;u=m.next())u=u.value,t=d,w=b/(l-p),t+=w*(u-p),f.push(Math.floor(t));m=$jscomp.makeIterator(e.yData);for(q=m.next();!q.done;q=m.next())q=q.value,""===q?h.push(""):(u=0,t=b/(l-p),u+=t*(q-p),h.push(Math.floor(u)));if("bar"===n){n=Math.floor((a-35)/(e.xData.length-1));c+=20;b=$jscomp.makeIterator(e.xData);for(d=b.next();!d.done;d=b.next())g.push(c),c+=n;for(c=0;c<=r;c++)d=
20,n=(a-35)/(r-0),d+=n*(c-0),k.push(Math.floor(d))}}return new MappedChart(e.index,e.xTitle,e.yTitle,k,h,f,g)};ChartPropertyCalculator.prototype.calculateYAxis=function(a,b,c){c="undefined"!=typeof c?c:8;var d=[];a===b&&(--a,b+=1);2>c?c=2:2<c&&(c-=2);c=(b-a)/c;var e=Math.pow(10,Math.floor(Math.log(c)/Math.LN10));c=Math.floor(c/e+.5)*e;b=c*Math.ceil(b/c);for(a=c*Math.floor(a/c);!(d.push(Math.round(1E3*(a+1E-5))/1E3),a+=c,a>b););return d};var chartUtilities={nullMinMapper:function(a){return""===a?Infinity:a},nullMaxMapper:function(a){return""===a?-Infinity:a},isSvgColliding:function(a,b){return!(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top)},getLineIntersectionPoint:function(a,b,c,d,e,f,g,h){var k,n={x:null,y:null};k=(a-c)*(f-h)-(b-d)*(e-g);if(!k)return n;n.x=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/k;n.y=((a*d-b*c)*(f-h)-(b-d)*(e*h-f*g))/k;return n},getInterpolatedVal:function(a,b,c,d,e){a=Number(a);c=Number(c);b=Number(b);
d=Number(d);return Math.round(100*(b+(e-a)/(c-a)*(d-b)))/100},generateColor:function(a,b,c){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=String(b).replace(/[^0-9a-f]/gi,"");6>b.length&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);c=c||0;var d=Math.ceil(parseInt(a.substring(0,2),16)*c+parseInt(b.substring(0,2),16)*(1-c)),e=Math.ceil(parseInt(a.substring(2,4),16)*c+parseInt(b.substring(2,4),16)*(1-c));a=Math.ceil(parseInt(a.substring(4,6),16)*c+parseInt(b.substring(4,6),
16)*(1-c));return"#"+(chartUtilities.hex(d)+chartUtilities.hex(e)+chartUtilities.hex(a))},hex:function(a){a=a.toString(16);return 1==a.length?"0"+a:a},shortenLargeNumber:function(a,b){for(var c="kMGTPEZY".split(""),d,e=c.length-1;0<=e;e--)if(d=Math.pow(1E3,e+1),a<=-d||a>=d)return+(a/d).toFixed(b)+c[e];return a},allSame:function(a,b){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c.value!==b)return!1;return!0},numberMapper:function(a){return""===a?"":Number(a)},truncateString:function(a){return 4<
a.length?a.substr(0,3)+"...":a},inheritsFrom:function(a,b){a.prototype=Object.create(b.prototype)}};var ColumnChartRenderer=function(a,b){this.ColumnChartRenderer$charts=a;this.ColumnChartRenderer$chartProperties=b};
ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$displayCharts=function(a,b){for(var c=0;c<this.ColumnChartRenderer$charts.length;c++){var d=Math.max.apply(Math,this.ColumnChartRenderer$charts[c].yData.map(chartUtilities.nullMaxMapper)),e=Math.min.apply(Math,this.ColumnChartRenderer$charts[c].yData.map(chartUtilities.nullMinMapper));if(Infinity!==e||-Infinity!==d)this.ColumnChartRenderer$charts[c].yTicks=this.ColumnChartRenderer$chartProperties.calculateYAxis(e,d),this.ColumnChartRenderer$charts[c].xTicks=
this.ColumnChartRenderer$chartProperties.calculateYAxis(0,this.ColumnChartRenderer$charts[c].xData.length),this.ColumnChartRenderer_prototype$createDivs("chart-area")}this.ColumnChartRenderer_prototype$createCharts(this.ColumnChartRenderer$charts,a,b)};ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};
ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};
ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,e,f,g,h,k){var n=Math.ceil(g-.001*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var p=n-h,l=q-g,m=this.ColumnChartRenderer$chartProperties.dataMapper(p,l,h,g,b[a]);[].push(m);var r=new Chart.YAxis(g,h-55,g,n-55,"yAxis",k);r.render(f);r.renderTicks(f,m.yTicks);r.renderTickValues(f,m.yTicks,b[a].yTicks);r.renderDivs(f,m.yTicks,p,g,l);r.renderZeroPlane(f,m.yTicks,b[a].yTicks,
l);k=new Chart.XAxis(q,n-55,g,n-55,"xAxis",k);k.render(f);k.renderTicks(f,m.xTicks);a>=c.length-d&&k.renderTickValues(f,m.xTicks,b[a].xData);c=e.drawRectByClass(g,h-55-40,30,l,"y-title-rect");f.appendChild(c);c=e.drawTextByClass(q/2-15,h-55-20,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");f.appendChild(c);for(c=0;c<m.yData.length;c++)""!==m.yData[c]&&(e.drawCircleByClass(m.xData[c]+g,p-m.yData[c]+h-55,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[c]),d=l/m.xData.length-
10,0<f.getElementsByClassName("zeroPlane").length?(q=f.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,"y1"),d=0>b[a].yData[c]?e.drawRectByClass(m.xData[c]+g-d/2,q-1,p-m.yData[c]+h-55-q,d,"column-plot"):e.drawRectByClass(m.xData[c]+g-d/2,n-m.yData[c]-55,m.yData[c]-(n-q)+55,d,"column-plot")):d=e.drawRectByClass(m.xData[c]+g-d/2,n-m.yData[c]-55,m.yData[c],d,"column-plot"),d.setAttributeNS(null,"data-value",b[a].yData[c]),f.appendChild(d))};
ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,e,f,g,h,k){c=Math.ceil(g-.095*g)+55;var n=Math.ceil(h-.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;var q=c-h,p=n-g,l=this.ColumnChartRenderer$chartProperties.dataMapper(q,p,h,g,b[a]);[].push(l);var m=new Chart.YAxis(g,h-15,g,c-15,"yAxis",k);m.render(f);m.renderTicks(f,l.yTicks);m.renderTickValues(f,l.yTicks,b[a].yTicks);m.renderDivs(f,l.yTicks,q,g,p);m.renderZeroPlane(f,l.yTicks,b[a].yTicks,
p);k=new Chart.XAxis(g,h-15,g,h-15,"xAxis",k);k.render(f);k.renderTicks(f,l.xTicks);a<d&&k.renderTickValues(f,l.xTicks,b[a].xData);d=e.drawRectByClass(g,c-7,30,p,"y-title-rect");f.appendChild(d);d=e.drawTextByClass(n/2-15,c+15,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");f.appendChild(d);for(d=0;d<l.yData.length;d++)""!==l.yData[d]&&(e.drawCircleByClass(l.xData[d]+g,q-l.yData[d]+h-15,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[d]),k=p/l.xData.length-10,0<
f.getElementsByClassName("zeroPlane").length?(n=f.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,"y1"),k=0>b[a].yData[d]?e.drawRectByClass(l.xData[d]+g-k/2,n-1,q-l.yData[d]+h-15-n,k,"column-plot"):e.drawRectByClass(l.xData[d]+g-k/2,c-l.yData[d]-15,l.yData[d]-(c-n)+15,k,"column-plot")):k=e.drawRectByClass(l.xData[d]+g-k/2,c-l.yData[d]-15,l.yData[d],k,"column-plot"),k.setAttributeNS(null,"data-value",b[a].yData[d]),f.appendChild(k))};
ColumnChartRenderer.prototype.ColumnChartRenderer_prototype$createCharts=function(a,b,c){var d,e=new SvgHelper,f=Math.floor(window.innerWidth/(c+55)),g=document.getElementsByClassName("multi-chart");d=g.length%f?!1:!0;for(var h=0;h<g.length;h++){var k=e.createSvgByClass(b+55,c+55,"chart-svg");d?this.ColumnChartRenderer_prototype$drawCompleteCharts(h,a,g,f,e,k,b,c,d):this.ColumnChartRenderer_prototype$drawIncompleteCharts(h,a,g,f,e,k,b,c,d);g[h].appendChild(k);for(var k=k.getElementsByClassName("x-value"),
n=0;n<k.length;n++){var q=e.getRotationPoint(k[n]);k[n].setAttributeNS(null,"transform","rotate(270 "+q+")")}}};var Data=function(){this.type=this.width=this.height=this.subCaption=this.caption="";this.chartData=[]};Data.prototype.ajaxLoader=function(a,b){var c=new XMLHttpRequest;if(!c)return console.log("Unable to create XMLHTTP instance."),!1;c.open("POST",a,!0);c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?b(JSON.parse(c.responseText)):console.log("There was a problem with the request"))};c.send()};
Data.prototype.dataParser=function(a){var b,c,d,e,f=[],g=[],h=[],k=[],n=[],q=[],p=[],l=-Infinity,m=Infinity,r=this;this.vis=a.metadata.visualization;this.type=a.metadata.type;this.width=a.metadata.width;this.sortBy=a.metadata.sortBy;this.height=a.metadata.height;this.caption=a.metadata.caption;this.sortOrder=a.metadata.sortOrder;this.subCaption=a.metadata.subCaption;this.positiveColorEnd=a.metadata.positiveGradientEnd;this.negativeColorEnd=a.metadata.negativeGradientEnd;this.positiveColorStart=a.metadata.positiveGradientStart;
this.negativeColorStart=a.metadata.negativeGradientStart;a.data.map(function(a){b=Object.keys(a);-1===g.indexOf(a[b[0]])&&g.push(a[b[0]]);p.push(a[b[3]]);e=b[3]});p.map(function(a,b){l=a>l?a:l;m=a<m?a:m});g.forEach(function(p,t){h=[];a.data.map(function(a){b=Object.keys(a);a[b[0]]===p&&-1===h.indexOf(a[b[1]])&&h.push(a[b[1]])});h.forEach(function(c,e){k=[];n=[];q=[];a.data.map(function(a){b=Object.keys(a);a[b[0]]===p&&a[b[1]]===c&&(-1===k.indexOf(a[b[2]])&&k.push(a[b[2]]),n.push(a[b[3]]),q.push(a[b[4]]))});
e=new MultiVarChart(e+2,r.vis,r.type,b[3],h[e],k,n);d=h.slice();d.unshift(b[2]);d.unshift(b[0]);"crosstab"===r.vis&&(e.keys=d,e.minY=m,e.maxY=l,e.category=p,e.colorCriteria=q);r.chartData.push(e)});"function"==typeof r.customSort?r.customSort():r.sortData(r.sortBy);var w=new ChartPropertyCalculator(r.chartData);if("trellis"===r.vis)"line"===r.type?g.indexOf(p)||(c=new LineChartRenderer(r.chartData,w),c.LineChartRenderer_prototype$createCaptions("chart-area",r.caption,r.subCaption),c.LineChartRenderer_prototype$displayCharts(r.height,
r.width)):"column"===r.type?g.indexOf(p)||(c=new ColumnChartRenderer(r.chartData,w),c.ColumnChartRenderer_prototype$createCaptions("chart-area",r.caption,r.subCaption),c.ColumnChartRenderer_prototype$displayCharts(r.height,r.width)):console.log("Sorry Dave. I can't let you render a trellis without columns or lines");else if("crosstab"===r.vis)if("bar"===r.type){c=new BarChartRenderer(r.chartData,w);c.plotColor=r.positiveColorStart;c.plotColorEnd=r.positiveColorEnd;c.negativeColor=r.negativeColorStart;
c.negativeColorEnd=r.negativeColorEnd;c.totalRows=g.length;var w=Math.floor((document.body.clientWidth-20)/d.length),v=Math.floor(window.innerHeight/g.length);110>v&&(v=110);t||c.displayHeaders(20,w,d);c.BarChartRenderer_prototype$displayCharts(v-25,w,g.indexOf(p));t===g.length-1&&c.drawX(50,w,d,e);t=document.getElementsByClassName("bar-plot");Array.from(t).map(function(a,b,c){f.push(a.getAttributeNS(null,"data-criteria"))});c.colorPlots(f)}else console.log("Sorry Dave. I can't let you render a crosstab without bars.");
else console.log("Sorry Dave. I can't let you render anything other than a trellis or a crosstab");r.chartData=[]});(new EventAgents(this.type)).crosshairHandler(document.getElementsByClassName("chart-svg"))};Data.prototype.sortData=function(a){switch(a){case "average":this.sortByAverage();break;case "value":this.sortByValue();break;default:console.log("no sorting applied")}};
Data.prototype.sortByAverage=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),c=b.next();!c.done;c=b.next()){for(var d=0,e=0,c=$jscomp.makeIterator(c.value.yData),f=c.next();!f.done;f=c.next())f=f.value,""!==f&&(d+=f,e++);a.push(d/e)}this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};
Data.prototype.sortByValue=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),c=b.next();!c.done;c=b.next())a.push(Math.max.apply(Math,c.value.yData));this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};
Data.prototype.multiSort=function(a,b,c){var d=[],e;for(e in b)d.push({sort:b[e],support:a[e]});"descending"==c?d.sort(function(a,b){return a.support>b.support?-1:a.support==b.support?0:1}):"ascending"==c&&d.sort(function(a,b){return a.support<b.support?-1:a.support==b.support?0:1});for(a=0;a<d.length;a++)b[a]=d[a].sort;return b};var EventAgents=function(a){this.chartType=a;this.svgHelper=new SvgHelper;document.getElementsByClassName("graphCircle")[0]&&(this.defaultAnchorStroke=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).stroke,this.defaultAnchorFill=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).fill);document.getElementsByClassName("column-plot")[0]&&(this.defaultPlotFill=getComputedStyle(document.getElementsByClassName("column-plot")[0]).fill)};
EventAgents.prototype.createCrosshair=function(a){var b=a.target.getBoundingClientRect().left;a=new CustomEvent("crosshairCreateEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.createOtherCrosshairs=function(a){var b=Number(a.target.getAttributeNS(null,"height"));a.target.getAttributeNS(null,"x");var c=Number(a.target.getAttributeNS(null,"y"));b&&(c=this.svgHelper.drawLineByClass(a.detail,c,a.detail,b+c,"otherCrosshair"),a.target.parentNode.insertBefore(c,a.target),c=this.svgHelper.drawRectByClass(a.detail,b,20,60,"otherTooltipBg"),c.setAttributeNS(null,"rx",2),c.setAttributeNS(null,"ry",2),c.style.visibility="hidden",a.target.parentNode.insertBefore(c,
a.target),b=this.svgHelper.drawTextByClass(a.detail,b,"","otherTooltip"),b.style.visibility="hidden",a.target.parentNode.insertBefore(b,a.target))};EventAgents.prototype.moveCrosshair=function(a){var b=a.target.getBoundingClientRect().left;a=new CustomEvent("crosshairMoveEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.moveOtherCrosshairs=function(a){var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("otherTooltipBg"),e=a.target.parentNode.getElementsByClassName("graphCircle"),f=a.target.parentNode.getElementsByClassName("graphLine");getComputedStyle(e[0]);var g,h,k,n,q,p,l,m,r,u,t,w;b[0].setAttributeNS(null,"x1",a.detail-9);b[0].setAttributeNS(null,"x2",a.detail-9);u=b[0].getBoundingClientRect();
p=b[0].getAttributeNS(null,"x1");l=b[0].getAttributeNS(null,"y1");m=b[0].getAttributeNS(null,"x2");r=b[0].getAttributeNS(null,"y2");if(b[0].getBoundingClientRect().left<e[0].getBoundingClientRect().left||b[0].getBoundingClientRect().right>e[e.length-1].getBoundingClientRect().right)c[0].style.visibility="hidden",d[0].style.visibility="hidden",e[0].style.stroke=this.defaultAnchorStroke,e[e.length-1].style.stroke=this.defaultAnchorStroke,e[0].setAttributeNS(null,"r",4),e[e.length-1].setAttributeNS(null,
"r",4);else{for(var v=1;v<e.length;v++)g=f[v-1].getBoundingClientRect(),h=f[v-1].getAttributeNS(null,"x1"),k=f[v-1].getAttributeNS(null,"y1"),n=f[v-1].getAttributeNS(null,"x2"),q=f[v-1].getAttributeNS(null,"y2"),w=e[v].getAttributeNS(null,"data-value"),t=e[v-1].getAttributeNS(null,"data-value"),chartUtilities.isSvgColliding(g,u)&&(g=chartUtilities.getLineIntersectionPoint(p,l,m,r,h,k,n,q),h=chartUtilities.getInterpolatedVal(h,t,n,w,g.x),c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",
g.x+6),c[0].setAttributeNS(null,"y",g.y+20),c[0].textContent=h,d[0].style.visibility="initial",d[0].setAttributeNS(null,"x",g.x+4),d[0].setAttributeNS(null,"y",g.y+5),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6));for(v=0;v<e.length;v++)f=e[v].getBBox(),m=e[v].getBoundingClientRect(),p=a.target.getBoundingClientRect(),l=b[0].getBoundingClientRect(),chartUtilities.isSvgColliding(m,l)?(c[0].style.visibility="initial",d[0].style.visibility="initial",l=f.x+f.width+5,r=f.x+f.width+3,
m=f.y+2*f.height,u=f.y+f.height-3,l+f.width>p.right&&(l-=5*f.width-5,r-=5*f.width-5),c[0].setAttributeNS(null,"x",l),c[0].setAttributeNS(null,"y",m+3),c[0].textContent=e[v].getAttributeNS(null,"data-value"),e[v].setAttributeNS(null,"r",5),e[v].style.stroke="#f15c5c",d[0].setAttributeNS(null,"x",r),d[0].setAttributeNS(null,"y",u),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6)):(e[v].setAttributeNS(null,"r",4),e[v].style.stroke=this.defaultAnchorStroke)}};
EventAgents.prototype.removeCrosshair=function(a){a=new Event("crosshairRemoveEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.removeOtherCrosshairs=function(a){for(var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("graphCircle"),e=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),f=b.next();!f.done;f=b.next())a.target.parentNode.removeChild(f.value);d=$jscomp.makeIterator(d);for(b=d.next();!b.done;b=d.next())b=b.value,b.style.stroke=this.defaultAnchorStroke,
b.setAttributeNS(null,"r",4);c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())a.target.parentNode.removeChild(d.value);e=$jscomp.makeIterator(e);for(c=e.next();!c.done;c=e.next())a.target.parentNode.removeChild(c.value)};
EventAgents.prototype.prepPlot=function(a){var b=a.target.getBoundingClientRect().left,c=a.target.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x");a=new CustomEvent("plotLightEvent",{detail:{mousex:a.clientX-b+62,mousey:a.clientY-c+3,hoveredPlotX:d}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.prepAllPlots=function(a){var b;a.target.getAttributeNS(null,"height");a.target.getAttributeNS(null,"x");a.target.getAttributeNS(null,"y");b=Math.floor(1E3*Number(a.detail.hoveredPlotX))/1E3;Math.floor(1E3*a.target.getBBox().x)/1E3==b&&(a.target.style.fill="#b94748");b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,20,60,"otherTooltipBg");b.setAttributeNS(null,"rx",2);b.setAttributeNS(null,"ry",2);b.style.visibility="hidden";a.target.parentNode.appendChild(b);
b=this.svgHelper.drawTextByClass(a.detail.mousex,a.detail.mousey,"","otherTooltip");a.target.parentNode.appendChild(b)};
EventAgents.prototype.prepTooltips=function(a){var b=a.target.parentNode.getBoundingClientRect().left,c=a.target.parentNode.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x");a=new CustomEvent("tooltipMoveEvent",{detail:{mousex:a.clientX-b-15,mousey:a.clientY-c+15,hoveredPlotX:d}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.moveTooltips=function(a){a.target.getBoundingClientRect();var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg"),d=Math.floor(1E3*Number(a.detail.hoveredPlotX))/1E3;Math.floor(1E3*a.target.getBBox().x)/1E3==d&&(c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",a.detail.mousex),c[0].setAttributeNS(null,"y",a.detail.mousey),b[0].textContent=a.target.getAttributeNS(null,"data-value"),b[0].setAttributeNS(null,
"x",a.detail.mousex+5),b[0].setAttributeNS(null,"y",a.detail.mousey+15),c[0].setAttributeNS(null,"width",b[0].getComputedTextLength()+10))};EventAgents.prototype.unprepPlot=function(a){a=new Event("unprepPlotEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.unprepAllPlots=function(a){"rgb(185, 71, 72)"===a.target.style.fill&&(a.target.style.fill=this.defaultPlotFill);for(var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),d=b.next();!d.done;d=b.next())a.target.parentNode.removeChild(d.value);c=$jscomp.makeIterator(c);for(b=c.next();!b.done;b=c.next())a.target.parentNode.removeChild(b.value)};
EventAgents.prototype.dragSelect=function(a){var b=a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customDragSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};
EventAgents.prototype.customDragSelect=function(a){for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=b.next())c.value.style.fill=this.defaultPlotFill;b=$jscomp.makeIterator(document.getElementsByClassName("graphCircle"));for(c=b.next();!c.done;c=b.next())c.value.style.fill=this.defaultAnchorFill;a.target.onmousemove=this.expandSelect;a.target.onmouseup=this.selectPlots;b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,5,5,"select-box");
b.setAttributeNS(null,"fill","red");b.setAttributeNS(null,"fill-opacity",.4);a.target.appendChild(b)};EventAgents.prototype.expandSelect=function(a){var b=a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customExpandSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};
EventAgents.prototype.customExpandSelect=function(a){var b=a.target.parentNode;b.getBoundingClientRect();for(var b=b.getElementsByClassName("select-box"),c=a.target.parentNode.getElementsByClassName("column-plot"),d=a.target.parentNode.getElementsByClassName("graphCircle"),e=$jscomp.makeIterator(b),f=e.next();!f.done;f=e.next()){f=f.value;f.setAttributeNS(null,"width",a.detail.mousex);f.setAttributeNS(null,"height",a.detail.mousey);for(var f=$jscomp.makeIterator(c),g=f.next();!g.done;g=f.next())g=
g.value,chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),g.getBoundingClientRect())&&(g.style.fill="#b94749");f=$jscomp.makeIterator(d);for(g=f.next();!g.done;g=f.next())g=g.value,chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),g.getBoundingClientRect())&&(g.style.fill="#b94749")}};EventAgents.prototype.selectPlots=function(a){a=new Event("customSelectPlots");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-svg")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};
EventAgents.prototype.customSelectPlots=function(a){a.target.onmouseup=null;a.target.onmousemove=null;var b=document.getElementsByClassName("select-box");a.target.removeChild(b[0])};
EventAgents.prototype.crosshairHandler=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;if("column"===this.chartType)for(var c=$jscomp.makeIterator(b.getElementsByClassName("column-plot")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.prepPlot),d.addEventListener("plotLightEvent",this.prepAllPlots.bind(this)),d.addEventListener("mousemove",this.prepTooltips),d.addEventListener("tooltipMoveEvent",this.moveTooltips.bind(this)),d.addEventListener("mouseleave",
this.unprepPlot),d.addEventListener("unprepPlotEvent",this.unprepAllPlots.bind(this));else if("line"===this.chartType)for(c=$jscomp.makeIterator(b.getElementsByClassName("chart-rect")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.createCrosshair),d.addEventListener("crosshairCreateEvent",this.createOtherCrosshairs.bind(this)),d.addEventListener("mousemove",this.moveCrosshair),d.addEventListener("crosshairMoveEvent",this.moveOtherCrosshairs.bind(this)),d.addEventListener("mouseleave",
this.removeCrosshair),d.addEventListener("crosshairRemoveEvent",this.removeOtherCrosshairs.bind(this));b.getAttributeNS(null,"class");"bar"!==this.chartType&&(b.addEventListener("mousedown",this.dragSelect),b.addEventListener("customDragSelect",this.customDragSelect.bind(this)),b.addEventListener("customExpandSelect",this.customExpandSelect.bind(this)),b.addEventListener("customSelectPlots",this.customSelectPlots.bind(this)))}};var LineChartRenderer=function(a,b){this.LineChartRenderer$charts=a;this.LineChartRenderer$chartProperties=b};
LineChartRenderer.prototype.LineChartRenderer_prototype$displayCharts=function(a,b){for(var c=0;c<this.LineChartRenderer$charts.length;c++){var d=Math.max.apply(Math,this.LineChartRenderer$charts[c].yData.map(chartUtilities.nullMaxMapper)),e=Math.min.apply(Math,this.LineChartRenderer$charts[c].yData.map(chartUtilities.nullMinMapper));if(Infinity!==e||-Infinity!==d)this.LineChartRenderer$charts[c].yTicks=this.LineChartRenderer$chartProperties.calculateYAxis(e,d),this.LineChartRenderer$charts[c].xTicks=
this.LineChartRenderer$chartProperties.calculateYAxis(0,this.LineChartRenderer$charts[c].xData.length),this.LineChartRenderer_prototype$createDivs("chart-area")}this.LineChartRenderer_prototype$createCharts(this.LineChartRenderer$charts,a,b)};LineChartRenderer.prototype.LineChartRenderer_prototype$createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};
LineChartRenderer.prototype.LineChartRenderer_prototype$createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};
LineChartRenderer.prototype.LineChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,e,f,g,h,k){var n=Math.ceil(g-.001*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var p=n-h,l=q-g,m=this.LineChartRenderer$chartProperties.dataMapper(p,l,h,g,b[a]);[].push(m);var r=new Chart.YAxis(g,h-55,g,n-55,"yAxis",k);r.render(f);r.renderTicks(f,m.yTicks);r.renderTickValues(f,m.yTicks,b[a].yTicks);r.renderDivs(f,m.yTicks,p,g,l);k=new Chart.XAxis(q,n-55,g,n-55,"xAxis",k);
k.render(f);k.renderTicks(f,m.xTicks);a>=c.length-d&&k.renderTickValues(f,m.xTicks,b[a].xData);c=e.drawTextByClass(q/2-15,h-55-20,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");d=e.drawRectByClass(g,h-55-40,30,l,"y-title-rect");f.appendChild(d);f.appendChild(c);for(c=0;c<m.yData.length-1;c++)if(d=0,""!==m.yData[c+1]&&""!==m.yData[c])d=e.drawLineByClass(m.xData[c]+g,p-m.yData[c]+h-55,m.xData[c+1]+g,p-m.yData[c+1]+h-55,"graphLine"),f.appendChild(d);else if(""!==m.yData[c])for(k=
c+2;k<m.yData.length;k++)if(c++,d++,""!==m.yData[k]){d=e.drawLineByClass(m.xData[c-d]+g,p-m.yData[c-d]+h-55,m.xData[k]+g,p-m.yData[k]+h-55,"graphLine inferredLine");f.appendChild(d);break}for(c=0;c<m.yData.length;c++)""!==m.yData[c]&&(d=e.drawCircleByClass(m.xData[c]+g,p-m.yData[c]+h-55,4,"graphCircle"),d.setAttributeNS(null,"data-value",b[a].yData[c]),f.appendChild(d));a=e.drawRectByClass(g,h-55,p,l,"chart-rect");a.setAttributeNS(null,"fill-opacity",0);f.appendChild(a)};
LineChartRenderer.prototype.LineChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,e,f,g,h,k){var n=Math.ceil(g-.095*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;c=n-h;var p=q-g,l=this.LineChartRenderer$chartProperties.dataMapper(c,p,h,g,b[a]);[].push(l);var m=new Chart.YAxis(g,h-15,g,n-15,"yAxis",k);m.render(f);m.renderTicks(f,l.yTicks);m.renderTickValues(f,l.yTicks,b[a].yTicks);m.renderDivs(f,l.yTicks,c,g,p);k=new Chart.XAxis(q,h-15,g,h-15,"xAxis",
k);k.render(f);k.renderTicks(f,l.xTicks);a<d&&k.renderTickValues(f,l.xTicks,b[a].xData);d=e.drawRectByClass(g,n-7,30,p,"y-title-rect");f.appendChild(d);d=e.drawTextByClass(q/2-15,n+15,""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")","y-title");f.appendChild(d);for(d=0;d<l.yData.length-1;d++)if(n=0,""!==l.yData[d+1]&&""!==l.yData[d])n=e.drawLineByClass(l.xData[d]+g,c-l.yData[d]+h-15,l.xData[d+1]+g,c-l.yData[d+1]+h-15,"graphLine"),f.appendChild(n);else if(""!==l.yData[d])for(k=d+2;k<l.yData.length;k++)if(d++,
n++,""!==l.yData[k]){n=e.drawLineByClass(l.xData[d-n]+g,c-l.yData[d-n]+h-15,l.xData[k]+g,c-l.yData[k]+h-15,"graphLine inferredLine");f.appendChild(n);break}for(d=0;d<l.yData.length;d++)""!==l.yData[d]&&(n=e.drawCircleByClass(l.xData[d]+g,c-l.yData[d]+h-15,4,"graphCircle"),n.setAttributeNS(null,"data-value",b[a].yData[d]),f.appendChild(n));a=e.drawRectByClass(g,h-15,c,p,"chart-rect");a.setAttributeNS(null,"fill-opacity",0);f.appendChild(a)};
LineChartRenderer.prototype.LineChartRenderer_prototype$createCharts=function(a,b,c){var d,e=new SvgHelper,f=Math.floor(window.innerWidth/(c+55)),g=document.getElementsByClassName("multi-chart");d=g.length%f?!1:!0;for(var h=0;h<g.length;h++){var k=e.createSvgByClass(b+55,c+55,"chart-svg");d?this.LineChartRenderer_prototype$drawCompleteCharts(h,a,g,f,e,k,b,c,d):this.LineChartRenderer_prototype$drawIncompleteCharts(h,a,g,f,e,k,b,c,d);g[h].appendChild(k);for(var k=k.getElementsByClassName("x-value"),
n=0;n<k.length;n++){var q=e.getRotationPoint(k[n]);k[n].setAttributeNS(null,"transform","rotate(270 "+q+")")}}};var MappedChart=function(a,b,c,d,e,f,g){this.index=a;this.xTitle=b;this.yTitle=c;this.xData=d;this.yData=e;this.yTicks=f;this.xTicks=g};var MultiVarChart=function(a,b,c,d,e,f,g,h,k){this.index=a;this.vis=b;this.type=c;this.xTitle=d;this.yTitle=e;this.xData=f;this.yData=g;this.xUnit=h?h:"";this.yUnit=k?k:""};var SvgHelper=function(){this.svgns="http://www.w3.org/2000/svg"};SvgHelper.prototype.createSvgByClass=function(a,b,c){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"height",a+"px");d.setAttributeNS(null,"width",b+"px");d.setAttributeNS(null,"version","1.1");d.setAttributeNS(null,"class",c);return d};
SvgHelper.prototype.drawLineByClass=function(a,b,c,d,e){var f=document.createElementNS("http://www.w3.org/2000/svg","line");f.setAttributeNS(null,"x1",a);f.setAttributeNS(null,"y1",b);f.setAttributeNS(null,"x2",c);f.setAttributeNS(null,"y2",d);f.setAttributeNS(null,"stroke","black");f.setAttributeNS(null,"class",e);return f};
SvgHelper.prototype.drawTextByClass=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttributeNS(null,"x",a);e.setAttributeNS(null,"y",b);e.setAttributeNS(null,"class",d);e.setAttributeNS(null,"stroke","black");e.textContent=c;return e};
SvgHelper.prototype.drawRectByClass=function(a,b,c,d,e){var f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttributeNS(null,"x",a);f.setAttributeNS(null,"y",b);f.setAttributeNS(null,"height",c);f.setAttributeNS(null,"width",d);f.setAttributeNS(null,"class",e);f.setAttributeNS(null,"fill","white");return f};
SvgHelper.prototype.drawCircleByClass=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttributeNS(null,"cx",a);e.setAttributeNS(null,"cy",b);e.setAttributeNS(null,"r",c+"px");e.setAttributeNS(null,"class",d);return e};SvgHelper.prototype.getRotationPoint=function(a){a=a.getBBox();return a.x+14+", "+(a.y+a.height/2)};(function(){Chart.XAxis=function(a,b,c,d,e,f){Chart.Axis.call(this,a,b,c,d,e,f)};chartUtilities.inheritsFrom(Chart.XAxis,Chart.Axis);Chart.XAxis.prototype.renderTicks=function(a,b){var c;b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,c=this.columnsAreComplete?this.svgHelper.drawLineByClass(c,this.startY,c,this.endY+5,"xTick"):this.svgHelper.drawLineByClass(c,this.startY-5,c,this.startY,"xTick"),a.appendChild(c)};Chart.XAxis.prototype.renderTickValues=function(a,b,c){var d,e=
$jscomp.makeIterator(b);for(d=e.next();!d.done;d=e.next()){d=d.value;var f=c[b.indexOf(d)];d=this.columnsAreComplete?"crosstabs"===this.chartVis?b.indexOf(d)===b.length-1?this.svgHelper.drawTextByClass(d-13,this.startY+22,"","x-value"):this.svgHelper.drawTextByClass(d-13,this.startY+22,f,"x-value"):this.svgHelper.drawTextByClass(d-13,this.startY+32,f,"x-value"):this.svgHelper.drawTextByClass(d-13,this.startY-23,f,"x-value");a.appendChild(d)}}})();(function(){Chart.YAxis=function(a,b,c,d,e,f){Chart.Axis.call(this,a,b,c,d,e,f)};chartUtilities.inheritsFrom(Chart.YAxis,Chart.Axis);Chart.YAxis.prototype.renderTicks=function(a,b){var c;b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,c=this.columnsAreComplete?this.svgHelper.drawLineByClass(this.startX-5,c-55,this.endX,c-55,"yTick"):this.svgHelper.drawLineByClass(this.startX-5,c-15,this.endX,c-15,"yTick"),a.appendChild(c)};Chart.YAxis.prototype.renderTickValues=function(a,b,
c){var d,e=$jscomp.makeIterator(b);for(d=e.next();!d.done;d=e.next()){d=d.value;var f=c[b.indexOf(d)];d=this.columnsAreComplete?"category"===this.type?this.svgHelper.drawTextByClass(45,d-55+5,f,"y-value"):this.svgHelper.drawTextByClass(45,this.endY+this.startY-d+60,f,"y-value"):this.svgHelper.drawTextByClass(50,this.endY+this.startY-d+20,f,"y-value");d.setAttributeNS(null,"text-anchor","end");a.appendChild(d)}};Chart.YAxis.prototype.renderDivs=function(a,b,c,d,e){var f,g=$jscomp.makeIterator(b);for(f=
g.next();!f.done;f=g.next())f=f.value,f=this.columnsAreComplete?this.svgHelper.drawRectByClass(d,f-55,c-f+b[0],e,"yDiv"):this.svgHelper.drawRectByClass(d,f-15,c-f+b[0],e,"yDiv"),a.appendChild(f)};Chart.YAxis.prototype.renderZeroPlane=function(a,b,c,d){var e;a=$jscomp.makeIterator(b);for(e=a.next();!e.done;e=a.next())e=e.value,0==c[b.indexOf(e)]&&(e=this.columnsAreComplete?"category"===this.type?this.svgHelper.drawLineByClass(this.startX,e-5,this.startX,e+(this.endY-this.startY)-5,"zeroPlane"):this.svgHelper.drawLineByClass(this.startX,
this.endY+this.startY-e+55,this.startX+d,this.endY+this.startY-e+55,"zeroPlane"):this.svgHelper.drawLineByClass(this.startX,this.endY+this.startY-e+15,this.startX+d,this.endY+this.startY-e+15,"zeroPlane"),e.setAttributeNS(null,"stroke-opacity",100))}})();

//# sourceMappingURL=chart.min.js.map
