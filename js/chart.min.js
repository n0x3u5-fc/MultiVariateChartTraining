'use strict';var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.patches={};$jscomp.patch=function(a,b){($jscomp.patches[a]=$jscomp.patches[a]||[]).push(b);var c=$jscomp.global;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var f=[],e=0,g=d.length;e<g;e++){var h;a:if(h=d[e],h.length<$jscomp.SYMBOL_PREFIX.length)h=!1;else{for(var m=0;m<$jscomp.SYMBOL_PREFIX.length;m++)if(h[m]!=$jscomp.SYMBOL_PREFIX[m]){h=!1;break a}h=!0}h?a.push(d[e]):f.push(d[e])}return f}};$jscomp.patch("Object.keys",b);$jscomp.patch("Object.getOwnPropertyNames",b);$jscomp.patch("Object.getOwnPropertySymbols",
function(c){return function(d){b.unused=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+a+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}};var Chart=function(a){this.render=function(b){b=new Chart.Data(b);b.ajaxLoader(a,b.dataParser.bind(b));this.customSort&&(b.customSort=this.customSort)}};var chartUtilities={};
(function(){Chart.chartUtilities={};Chart.chartUtilities.nullMinMapper=function(a){return""===a?Infinity:a};Chart.chartUtilities.nullMaxMapper=function(a){return""===a?-Infinity:a};Chart.chartUtilities.isSvgColliding=function(a,b){return!(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top)};Chart.chartUtilities.getLineIntersectionPoint=function(a,b,c,d,f,e,g,h){var m,k={x:null,y:null};m=(a-c)*(e-h)-(b-d)*(f-g);if(!m)return k;k.x=((a*d-b*c)*(f-g)-(a-c)*(f*h-e*g))/m;k.y=((a*d-b*c)*(e-h)-
(b-d)*(f*h-e*g))/m;return k};Chart.chartUtilities.getInterpolatedVal=function(a,b,c,d,f){a=Number(a);c=Number(c);b=Number(b);d=Number(d);return Math.round(100*(b+(f-a)/(c-a)*(d-b)))/100};Chart.chartUtilities.generateColor=function(a,b,c){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=String(b).replace(/[^0-9a-f]/gi,"");6>b.length&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);c=c||0;var d=Math.ceil(parseInt(a.substring(0,2),16)*c+parseInt(b.substring(0,2),16)*(1-c)),f=Math.ceil(parseInt(a.substring(2,
4),16)*c+parseInt(b.substring(2,4),16)*(1-c));a=Math.ceil(parseInt(a.substring(4,6),16)*c+parseInt(b.substring(4,6),16)*(1-c));return"#"+(Chart.chartUtilities.hex(d)+Chart.chartUtilities.hex(f)+Chart.chartUtilities.hex(a))};Chart.chartUtilities.hex=function(a){a=a.toString(16);return 1==a.length?"0"+a:a};Chart.chartUtilities.shortenLargeNumber=function(a,b){for(var c="kMGTPEZY".split(""),d,f=c.length-1;0<=f;f--)if(d=Math.pow(1E3,f+1),a<=-d||a>=d)return+(a/d).toFixed(b)+c[f];return a};Chart.chartUtilities.allSame=
function(a,b){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c.value!==b)return!1;return!0};Chart.chartUtilities.numberMapper=function(a){return""===a?"":Number(a)};Chart.chartUtilities.truncateString=function(a){return 4<a.length?a.substr(0,3)+"...":a};Chart.chartUtilities.inheritsFrom=function(a,b){a.prototype=Object.create(b.prototype)}})();(function(){Chart.Axis=function(a,b,c,d,f,e){this.startX=a;this.startY=b;this.endX=c;this.endY=d;this.className=f;this.svgHelper=new Chart.SvgHelper;this.columnsAreComplete=e};Chart.Axis.prototype.render=function(a){var b=this.svgHelper.drawLineByClass(this.startX,this.startY,this.endX,this.endY,this.className);a.appendChild(b)}})();(function(){Chart.BarChartRenderer=function(a,b){this.Chart_BarChartRenderer$charts=a;this.Chart_BarChartRenderer$chartProperties=b};Chart.BarChartRenderer.prototype.displayHeaders=function(a,b,c){var d,f=new Chart.SvgHelper,e=$jscomp.makeIterator(c);for(d=e.next();!d.done;d=e.next()){d=d.value;this.Chart_BarChartRenderer_prototype$createDivs(this.renderDiv);var g=f.createSvgByClass(a,b,"header-svg"),h=document.getElementsByClassName("multi-chart-header");Array.from(h).map(function(a,b){a.style.borderBottom=
"1px solid black";0<b&&(a.style.borderRight="1px solid black");a.appendChild(g)});d=1<c.indexOf(d)?f.drawTextByClass(Math.floor(b/2-2*d.length),16,d,"header"):f.drawTextByClass(16,16,d,"header");g.appendChild(d)}};Chart.BarChartRenderer.prototype.drawRowName=function(a,b,c,d,f,e,g,h){b=Math.floor(0);var m=Math.floor(1);f=this.Chart_BarChartRenderer$chartProperties.dataMapper(Math.ceil(f)-b,Math.ceil(e)-m,b,m,a[0]);[].push(f);c=c.drawTextByClass(16,f.xTicks[0]+8,a[g].category,"category-text");d.appendChild(c);
d.setAttributeNS(null,"class","row-category");g!==a.length-1&&h!==this.totalRows-1&&(d.style.borderBottom="1px solid black")};Chart.BarChartRenderer.prototype.drawYLabels=function(a,b,c,d,f,e,g,h){b=Math.floor(0);var m=Math.floor(1);f=this.Chart_BarChartRenderer$chartProperties.dataMapper(Math.ceil(f)-b,Math.ceil(e)-m,b,m,a[0]);[].push(f);e=$jscomp.makeIterator(f.xTicks);for(b=e.next();!b.done;b=e.next())b=b.value,m=a[g].xData[f.xTicks.indexOf(b)],b=c.drawTextByClass(16,b+8,m,"y-value"),d.appendChild(b);
d.setAttributeNS(null,"class","y-labels");g!==a.length-1&&h!==this.totalRows-1&&(d.style.borderBottom="1px solid black")};Chart.BarChartRenderer.prototype.drawX=function(a,b,c,d){var f=[],e=Math.ceil(b),g=Math.floor(0),h=Math.floor(1),m=Math.ceil(a)-g,k=e-h,q=new Chart.SvgHelper,r=this.Chart_BarChartRenderer$chartProperties.dataMapper(m,k,g,h,this.Chart_BarChartRenderer$charts[0]);[].push(r);for(var g=$jscomp.makeIterator(c),n=g.next();!n.done;n=g.next()){var n=n.value,l=document.createElement("span");
l.setAttribute("class","multi-chart-footer");l.style.display="inline-block";document.getElementById(this.renderDiv).appendChild(l);var t=q.createSvgByClass(a,b,"footer-svg"),l=document.getElementsByClassName("multi-chart-footer"),p=new Chart.XAxis(h,0,e,0,"xAxis",!0);p.type="numeric";Array.from(l).map(function(a,b){a.style.borderTop="1px solid black";0<b&&(a.style.borderRight="1px solid black");a.appendChild(t)});var l=document.getElementsByClassName("footer-svg"),w=this;Array.from(l).map(function(a,
b){if(1<b)for(p.renderTicks(t,r.yTicks),a=$jscomp.makeIterator(w.Chart_BarChartRenderer$charts[0].yTicks),b=a.next();!b.done;b=a.next())f.push(Chart.chartUtilities.shortenLargeNumber(b.value,2))});p.chartVis="crosstabs";p.renderTickValues(t,r.yTicks,f);1<c.indexOf(n)&&(n=q.drawTextByClass(k/2-3*d.length,m/1.2,d,"x-title"),t.appendChild(n))}};Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$displayCharts=function(a,b,c){var d=-Infinity,f=Infinity;if("trellis"===this.Chart_BarChartRenderer$charts[0].vis){c=
Math.floor(window.innerWidth/(b+55));c>this.Chart_BarChartRenderer$charts.length&&(c=this.Chart_BarChartRenderer$charts.length);for(var e=0;e<this.Chart_BarChartRenderer$charts.length;e++){for(var g=e;g<c;g++){var h=Math.max.apply(Math,this.Chart_BarChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMaxMapper)),m=Math.min.apply(Math,this.Chart_BarChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMinMapper));h>d&&(d=h);m<f&&(f=m)}if(Infinity!==f||-Infinity!==d)this.Chart_BarChartRenderer$charts[e].yTicks=
this.Chart_BarChartRenderer$chartProperties.calculateYAxis(f,d),this.Chart_BarChartRenderer$charts[e].xTicks=this.Chart_BarChartRenderer$chartProperties.calculateYAxis(0,this.Chart_BarChartRenderer$charts[e].xData.length),this.Chart_BarChartRenderer_prototype$createDivs(this.renderDiv)}this.Chart_BarChartRenderer_prototype$createCharts(this.Chart_BarChartRenderer$charts,a,b)}else if("crosstab"===this.Chart_BarChartRenderer$charts[0].vis){this.Chart_BarChartRenderer_prototype$createDivs(this.renderDiv,
c);this.Chart_BarChartRenderer_prototype$createDivs(this.renderDiv,c);for(e=0;e<this.Chart_BarChartRenderer$charts.length;e++)g=Math.max.apply(Math,this.Chart_BarChartRenderer$charts[e].yData.map(Chart.chartUtilities.nullMaxMapper)),h=Math.min.apply(Math,this.Chart_BarChartRenderer$charts[e].yData.map(Chart.chartUtilities.nullMinMapper)),g>d&&(d=g),h<f&&(f=h),Infinity===f&&-Infinity===d||this.Chart_BarChartRenderer_prototype$createDivs(this.renderDiv,c);for(e=0;e<this.Chart_BarChartRenderer$charts.length;e++)if(Infinity!==
f||-Infinity!==d)this.Chart_BarChartRenderer$charts[e].yTicks=this.Chart_BarChartRenderer$chartProperties.calculateYAxis(this.Chart_BarChartRenderer$charts[0].minY,this.Chart_BarChartRenderer$charts[0].maxY),this.Chart_BarChartRenderer$charts[e].xTicks=this.Chart_BarChartRenderer$chartProperties.calculateYAxis(this.Chart_BarChartRenderer$charts[0].minY,this.Chart_BarChartRenderer$charts[0].maxY);this.Chart_BarChartRenderer_prototype$createCharts(this.Chart_BarChartRenderer$charts,a,b,c)}else console.log("unavailable chart visualization.")};
Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$createDivs=function(a,b){var c=document.createElement("span");void 0!==b?c.setAttribute("class","multi-chart"+b):void 0===b&&"crosstab"===this.Chart_BarChartRenderer$charts[0].vis?c.setAttribute("class","multi-chart-header"):c.setAttribute("class","multi-chart");c.style.display="inline-block";document.getElementById(a).appendChild(c)};Chart.BarChartRenderer.prototype.colorPlots=function(a){var b,c,d=document.getElementsByClassName("chart-svg"),
f=this,e=a.filter(function(a){return 0>a?!0:!1}),g=Math.max.apply(Math,e)-Math.min.apply(Math,e);a=a.filter(function(a){return 0<=a?!0:!1});var h=Math.max.apply(Math,a)-Math.min.apply(Math,a);Array.from(d).map(function(a,d){a=a.getElementsByClassName("bar-plot");Array.from(a).map(function(a,d,e){d=Number(a.getAttributeNS(null,"data-criteria"));0>d?(c=d/g,b=Chart.chartUtilities.generateColor(f.negativeColor,f.negativeColorEnd,c)):(c=d/h,b=Chart.chartUtilities.generateColor(f.plotColor,f.plotColorEnd,
c));a.setAttributeNS(null,"fill",b)})})};Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,f,e,g,h,m,k){var q,r=[],n=0,l=0,
t=0,p=0;"crosstab"===this.Chart_BarChartRenderer$charts[0].vis?(n=Math.ceil(g),l=Math.ceil(h),p=Math.floor(0),t=Math.floor(1)):"trellis"===this.Chart_BarChartRenderer$charts[0].vis?(n=Math.ceil(g-.001*g)+55,l=Math.ceil(h-.025*h)+55,p=Math.floor(0+.2*g)+55,t=Math.floor(0+.025*g)+55):console.log("Unsupported chart visualization.");g=n-p;var w=l-t;h=this.Chart_BarChartRenderer$chartProperties.dataMapper(g,w,p,t,b[a]);[].push(h);if("crosstab"===this.Chart_BarChartRenderer$charts[0].vis){var v=new Chart.YAxis(t,
p,t,n,"yAxis",m);v.type="category";k!==this.totalRows-1&&(m=new Chart.XAxis(l,n,t,n,"xAxis",m),m.type="numeric",m.render(e));if(a>=c.length-d)for(c=$jscomp.makeIterator(b[a].yTicks),d=c.next();!d.done;d=c.next())r.push(Chart.chartUtilities.shortenLargeNumber(d.value,2));r=f.drawRectByClass(t,p-40,30,w,"y-title-rect");r=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";l=f.drawTextByClass(l/2-15,p-20,r,"y-title");for(l=0;l<h.yData.length;l++)""!==h.yData[l]&&(r=f.drawCircleByClass(h.yData[l]+
t,h.xData[l]+p,4,"graphCircle"),r.setAttributeNS(null,"data-value",b[a].yData[l]),r=g/h.xData.length-13,27<r&&(r=27),0<e.getElementsByClassName("zeroPlane").length||(q=b[a].yData.filter(function(a){return 0===a?!0:!1}),2>h.yData[l]&&0===q.length&&(h.yData[l]=2),q=f.drawRectByClass(t-1,h.xData[l]+p-r/2,r,h.yData[l],"bar-plot")),q.setAttributeNS(null,"data-criteria",b[a].colorCriteria[l]),q.setAttributeNS(null,"data-value",b[a].yData[l]),e.appendChild(q))}else if("trellis"===this.Chart_BarChartRenderer$charts[0].vis)for(v=
new Chart.YAxis(t,p-55,t,n-55,"yAxis",m),v.type="category",v.render(e),v.renderTicks(e,h.xTicks),a%d||v.renderTickValues(e,h.xTicks,b[a].xData),m=new Chart.XAxis(l,n-55,t,n-55,"xAxis",m),m.render(e),0<e.getElementsByClassName("zeroPlane").length&&(r=e.getElementsByClassName("xAxis"),Array.from(r).map(function(a){a.style.strokeWidth=0})),m.renderTicks(e,h.yTicks),a>=c.length-d&&m.renderTickValues(e,h.yTicks,b[a].yTicks),r=f.drawRectByClass(t,p-55-40,30,w,"y-title-rect"),e.appendChild(r),r=""===b[a].yUnit?
b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")",l=f.drawTextByClass(l/2-r.length,p-55-20,r,"y-title"),e.appendChild(l),l=0;l<h.yData.length;l++)""!==h.yData[l]&&(r=f.drawCircleByClass(h.yData[l]+t,h.xData[l]+p-55,4,"graphCircle"),r.setAttributeNS(null,"data-value",b[a].yData[l]),r=g/h.xData.length-13,27<r&&(r=27),0<e.getElementsByClassName("zeroPlane").length||(q=f.drawRectByClass(t,h.xData[l]+p-r/2-55,r,h.yData[l],"column-plot")),q.setAttributeNS(null,"data-value",b[a].yData[l]),e.appendChild(q));else console.log("Unsupported chart visualization.")};
Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,f,e,g,h,m){var k;c=Math.ceil(g-.095*g)+55;var q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;var r=c-h,n=q-g,l=this.Chart_BarChartRenderer$chartProperties.dataMapper(r,n,h,g,b[a]);[].push(l);var t=new Chart.YAxis(g,h-15,g,c-15,"yAxis",m);t.render(e);t.renderTicks(e,l.yTicks);a%d||t.renderTickValues(e,l.yTicks,b[a].yTicks);t.renderDivs(e,l.yTicks,r,g,n);t.renderZeroPlane(e,
l.yTicks,b[a].yTicks,n);m=new Chart.XAxis(g,h-15,g,h-15,"xAxis",m);m.render(e);m.renderTicks(e,l.xTicks);a<d&&m.renderTickValues(e,l.xTicks,b[a].xData);d=f.drawRectByClass(g,c-7,30,n,"y-title-rect");e.appendChild(d);d=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";"crosstab"===this.Chart_BarChartRenderer$charts[0].vis?k=f.drawTextByClass(q/2-15,c+15,d,"y-title"):"trellis"===this.Chart_BarChartRenderer$charts[0].vis?k=f.drawTextByClass(q/2-d.length,c+15,d,"y-title"):console.log("Unsupported chart visualization.");
e.appendChild(k);for(k=0;k<l.yData.length;k++)""!==l.yData[k]&&(f.drawCircleByClass(l.xData[k]+g,r-l.yData[k]+h-15,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[k]),d=n/l.xData.length-10,0<e.getElementsByClassName("zeroPlane").length?(q=e.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,"y1"),d=0>b[a].yData[k]?f.drawRectByClass(l.xData[k]+g-d/2,q-1,r-l.yData[k]+h-15-q,d,"column-plot"):f.drawRectByClass(l.xData[k]+g-d/2,c-l.yData[k]-15,l.yData[k]-(c-q)+15,d,"column-plot")):
d=f.drawRectByClass(l.xData[k]+g-d/2,c-l.yData[k]-15,l.yData[k],d,"column-plot"),d.setAttributeNS(null,"data-value",b[a].yData[k]),e.appendChild(d))};Chart.BarChartRenderer.prototype.Chart_BarChartRenderer_prototype$createCharts=function(a,b,c,d){var f,e,g,h=new Chart.SvgHelper,m=Math.floor(window.innerWidth/c);"crosstab"===this.Chart_BarChartRenderer$charts[0].vis?(e=document.getElementsByClassName("multi-chart"+d),f=!0):"trellis"===this.Chart_BarChartRenderer$charts[0].vis?(e=document.getElementsByClassName("multi-chart"),
m>e.length&&(m=e.length),f=e.length%m?!1:!0):console.log("Visualization unsupported.");for(var k=0;k<e.length;k++){"crosstab"===this.Chart_BarChartRenderer$charts[0].vis?(g=h.createSvgByClass(b,c,"chart-svg"),k?1===k?this.drawYLabels(a,e,h,g,b,c,k,d):f?this.Chart_BarChartRenderer_prototype$drawCompleteCharts(k-2,a,e,m,h,g,b,c,f,d):this.Chart_BarChartRenderer_prototype$drawIncompleteCharts(k-2,a,e,m,h,g,b,c,f):this.drawRowName(a,e,h,g,b,c,k,d),e[k].appendChild(g),0<k&&(e[k].style.borderRight="1px solid black")):
"trellis"===this.Chart_BarChartRenderer$charts[0].vis?(g=h.createSvgByClass(b+55,c+55,"chart-svg"),f?this.Chart_BarChartRenderer_prototype$drawCompleteCharts(k,a,e,m,h,g,b,c,f):this.Chart_BarChartRenderer_prototype$drawIncompleteCharts(k,a,e,m,h,g,b,c,f),e[k].appendChild(g)):console.log("Visualization unsupported.");for(var q=g.getElementsByClassName("x-value"),r=0;r<q.length;r++){var n=h.getRotationPoint(q[r]);q[r].setAttributeNS(null,"transform","rotate(270 "+n+")")}}}})();(function(){Chart.ChartPropertyCalculator=function(a){this.Chart_ChartPropertyCalculator$charts=a};Chart.ChartPropertyCalculator.prototype.dataMapper=function(a,b,c,d,f){var e=[],g=[],h=[],m=[],k=f.type,q=f.vis,r=f.yTicks[0],n=f.yTicks[f.yTicks.length-1],l=f.xTicks[0];Math.min.apply(Math,f.yData.map(Chart.chartUtilities.nullMinMapper));Math.max.apply(Math,f.yData.map(Chart.chartUtilities.nullMaxMapper));var t=f.xData.length-1;if("trellis"===q){for(var q=$jscomp.makeIterator(f.yTicks),p=q.next();!p.done;p=
q.next()){p=p.value;if("bar"===f.type)var w=d,v=b/(n-r);else w=c,v=a/(n-r);w+=v*(p-r);e.push(Math.floor(w))}q=$jscomp.makeIterator(f.yData);for(p=q.next();!p.done;p=q.next())p=p.value,""===p?h.push(""):(w=0,v="bar"===f.type?b/(n-r):a/(n-r),w+=v*(p-r),h.push(Math.floor(w)));if("column"===k){k=Math.floor((b-80)/(f.xData.length-1));c=d+40;a=$jscomp.makeIterator(f.xData);for(d=a.next();!d.done;d=a.next())g.push(c),c+=k;for(c=0;c<=t;c++)d=40,k=(b-80)/(t-0),d=c?d+k*(c-0):d+k*(c-l),m.push(Math.floor(d))}else if("line"===
k){k=Math.floor(b/(f.xData.length-1));c=d;a=$jscomp.makeIterator(f.xData);for(d=a.next();!d.done;d=a.next())g.push(c),c+=k;for(c=0;c<=t;c++)d=0,k=b/(t-0),d=c?d+k*(c-0):d+k*(c-l),m.push(Math.floor(d))}else if("bar"===k){k=Math.floor((a-35)/(f.xData.length-1));c+=20;b=$jscomp.makeIterator(f.xData);for(d=b.next();!d.done;d=b.next())g.push(c),c+=k;for(c=0;c<=t;c++)d=20,k=(a-35)/(t-0),d+=k*(c-0),m.push(Math.floor(d))}}else if("crosstab"===q){l=$jscomp.makeIterator(f.yTicks);for(p=l.next();!p.done;p=l.next())p=
p.value,w=d,v=b/(n-r),w+=v*(p-r),e.push(Math.floor(w));l=$jscomp.makeIterator(f.yData);for(p=l.next();!p.done;p=l.next())p=p.value,""===p?h.push(""):(w=0,v=b/(n-r),w+=v*(p-r),h.push(Math.floor(w)));if("bar"===k){k=Math.floor((a-35)/(f.xData.length-1));c+=20;b=$jscomp.makeIterator(f.xData);for(d=b.next();!d.done;d=b.next())g.push(c),c+=k;for(c=0;c<=t;c++)d=20,k=(a-35)/(t-0),d+=k*(c-0),m.push(Math.floor(d))}}return new Chart.MappedChart(f.index,f.xTitle,f.yTitle,m,h,e,g)};Chart.ChartPropertyCalculator.prototype.calculateYAxis=
function(a,b,c){c="undefined"!=typeof c?c:8;var d=[];a===b&&(--a,b+=1);2>c?c=2:2<c&&(c-=2);c=(b-a)/c;var f=Math.pow(10,Math.floor(Math.log(c)/Math.LN10));c=Math.floor(c/f+.5)*f;b=c*Math.ceil(b/c);for(a=c*Math.floor(a/c);!(d.push(Math.round(1E3*(a+1E-5))/1E3),a+=c,a>b););return d}})();(function(){})();(function(){Chart.ColumnChartRenderer=function(a,b){this.Chart_ColumnChartRenderer$charts=a;this.Chart_ColumnChartRenderer$chartProperties=b};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$displayCharts=function(a,b){var c=Infinity,d=-Infinity,f=Math.floor(window.innerWidth/(b+55));f>this.Chart_ColumnChartRenderer$charts.length&&(f=this.Chart_ColumnChartRenderer$charts.length);for(var e=0;e<this.Chart_ColumnChartRenderer$charts.length;e++){for(var g=e;g<f;g++){var h=Math.max.apply(Math,
this.Chart_ColumnChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMaxMapper)),m=Math.min.apply(Math,this.Chart_ColumnChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMinMapper));h>d&&(d=h);m<c&&(c=m)}if(Infinity!==c||-Infinity!==d)this.Chart_ColumnChartRenderer$charts[e].yTicks=this.Chart_ColumnChartRenderer$chartProperties.calculateYAxis(c,d),this.Chart_ColumnChartRenderer$charts[e].xTicks=this.Chart_ColumnChartRenderer$chartProperties.calculateYAxis(0,this.Chart_ColumnChartRenderer$charts[e].xData.length),
this.Chart_ColumnChartRenderer_prototype$createDivs(this.renderDiv)}this.Chart_ColumnChartRenderer_prototype$createCharts(this.Chart_ColumnChartRenderer$charts,a,b)};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$createCaptions=function(a,
b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class","sub-caption");b.innerHTML=c;a.appendChild(b)};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,f,e,g,h,m){var k=Math.ceil(g-.001*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var r=k-h,n=q-g,l=this.Chart_ColumnChartRenderer$chartProperties.dataMapper(r,
n,h,g,b[a]);[].push(l);var t=new Chart.YAxis(g,h-55,g,k-55,"yAxis",m);t.render(e);t.renderTicks(e,l.yTicks);a%d||t.renderTickValues(e,l.yTicks,b[a].yTicks);t.renderDivs(e,l.yTicks,r,g,n);t.renderZeroPlane(e,l.yTicks,b[a].yTicks,n);m=new Chart.XAxis(q,k-55,g,k-55,"xAxis",m);m.render(e);0<e.getElementsByClassName("zeroPlane").length&&(t=e.getElementsByClassName("xAxis"),Array.from(t).map(function(a){a.style.strokeWidth=0}));m.renderTicks(e,l.xTicks);a>=c.length-d&&m.renderTickValues(e,l.xTicks,b[a].xData);
c=f.drawRectByClass(g,h-55-40,30,n,"y-title-rect");e.appendChild(c);c=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";q=f.drawTextByClass(q/2-c.length,h-55-20,c,"y-title");e.appendChild(q);for(q=0;q<l.yData.length;q++)""!==l.yData[q]&&(f.drawCircleByClass(l.xData[q]+g,r-l.yData[q]+h-55,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[q]),c=n/l.xData.length-10,40<c&&(c=40),0<e.getElementsByClassName("zeroPlane").length?(d=e.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,
"y1"),c=0>b[a].yData[q]?f.drawRectByClass(l.xData[q]+g-c/2,d-1,r-l.yData[q]+h-55-d,c,"column-plot"):f.drawRectByClass(l.xData[q]+g-c/2,k-l.yData[q]-55,l.yData[q]-(k-d)+55,c,"column-plot")):c=f.drawRectByClass(l.xData[q]+g-c/2,k-l.yData[q]-55,l.yData[q],c,"column-plot"),c.setAttributeNS(null,"data-value",b[a].yData[q]),e.appendChild(c))};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,f,e,g,h,m){var k;c=Math.ceil(g-.095*g)+55;k=Math.ceil(h-
.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;var q=c-h,r=k-g,n=this.Chart_ColumnChartRenderer$chartProperties.dataMapper(q,r,h,g,b[a]);[].push(n);var l=new Chart.YAxis(g,h-15,g,c-15,"yAxis",m);l.render(e);l.renderTicks(e,n.yTicks);a%d||l.renderTickValues(e,n.yTicks,b[a].yTicks);l.renderDivs(e,n.yTicks,q,g,r);l.renderZeroPlane(e,n.yTicks,b[a].yTicks,r);m=new Chart.XAxis(g,h-15,g,h-15,"xAxis",m);m.render(e);m.renderTicks(e,n.xTicks);a<d&&m.renderTickValues(e,n.xTicks,b[a].xData);d=
f.drawRectByClass(g,c-7,30,r,"y-title-rect");e.appendChild(d);d=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";d=f.drawTextByClass(k/2-d.length,c+15,d,"y-title");e.appendChild(d);for(d=0;d<n.yData.length;d++)""!==n.yData[d]&&(f.drawCircleByClass(n.xData[d]+g,q-n.yData[d]+h-15,4,"graphCircle").setAttributeNS(null,"data-value",b[a].yData[d]),k=r/n.xData.length-10,40<k&&(k=40),0<e.getElementsByClassName("zeroPlane").length?(m=e.getElementsByClassName("zeroPlane")[0].getAttributeNS(null,
"y1"),k=0>b[a].yData[d]?f.drawRectByClass(n.xData[d]+g-k/2,m-1,q-n.yData[d]+h-15-m,k,"column-plot"):f.drawRectByClass(n.xData[d]+g-k/2,c-n.yData[d]-15,n.yData[d]-(c-m)+15,k,"column-plot")):k=f.drawRectByClass(n.xData[d]+g-k/2,c-n.yData[d]-15,n.yData[d],k,"column-plot"),k.setAttributeNS(null,"data-value",b[a].yData[d]),e.appendChild(k))};Chart.ColumnChartRenderer.prototype.Chart_ColumnChartRenderer_prototype$createCharts=function(a,b,c){var d,f=new Chart.SvgHelper,e=Math.floor(window.innerWidth/(c+
55)),g=document.getElementsByClassName("multi-chart");e>g.length&&(e=g.length);d=g.length%e?!1:!0;for(var h=0;h<g.length;h++){var m=f.createSvgByClass(b+55,c+55,"chart-svg");d?this.Chart_ColumnChartRenderer_prototype$drawCompleteCharts(h,a,g,e,f,m,b,c,d):this.Chart_ColumnChartRenderer_prototype$drawIncompleteCharts(h,a,g,e,f,m,b,c,d);g[h].appendChild(m);for(var m=m.getElementsByClassName("x-value"),k=0;k<m.length;k++){var q=f.getRotationPoint(m[k]);m[k].setAttributeNS(null,"transform","rotate(270 "+
q+")")}}}})();(function(){Chart.Data=function(a){this.type=this.width=this.height=this.subCaption=this.caption="";this.chartData=[];this.renderDiv=a};Chart.Data.prototype.ajaxLoader=function(a,b){var c=new XMLHttpRequest;if(!c)return console.log("Unable to create XMLHTTP instance."),!1;c.open("GET",a,!0);c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?b(JSON.parse(c.responseText)):console.log("There was a problem with the request"))};c.send()};Chart.Data.prototype.dataParser=
function(a){var b,c,d,f,e="",g=[],h=[],m=[],k=[],q=[],r=[],n=[],l=-Infinity,t=Infinity,p=this;this.vis=a.metadata.visualization;this.type=a.metadata.type;this.width=Number(a.metadata.width);this.sortBy=a.metadata.sortBy;this.height=Number(a.metadata.height);this.caption=a.metadata.caption;this.sortOrder=a.metadata.sortOrder;this.subCaption=a.metadata.subCaption;this.positiveColorEnd=a.metadata.positiveGradientEnd;this.negativeColorEnd=a.metadata.negativeGradientEnd;this.positiveColorStart=a.metadata.positiveGradientStart;
this.negativeColorStart=a.metadata.negativeGradientStart;a.data.map(function(a){Object.keys(a);var b=a.category.split("|");-1===h.indexOf(b[1])&&h.push(b[1]);a=a.data.split("|");void 0===a[1]?n.push(""):n.push(Number(a[1]));d=a[0]});n.map(function(a){""!==a&&(l=a>l?a:l,t=a<t?a:t)});h.forEach(function(n,v){m=[];a.data.map(function(a){Object.keys(a);var b=a.category.split("|");a=a.header.split("|");b[1]===n&&-1===m.indexOf(a[1])&&m.push(a[1])});m.forEach(function(b,e){var f;k=[];q=[];r=[];a.data.map(function(a){Object.keys(a);
var c=a.category.split("|"),d=a.header.split("|"),e=a.type.split("|"),g=a.data.split("|");a=a.highlight.split("|");c[1]===n&&d[1]===b&&(-1===k.indexOf(e[1])&&(f="trellis"===p.vis?Chart.chartUtilities.truncateString(e[1]):e[1],k.push(f)),Number.isNaN(Number(g[1]))&&void 0!==g[1]?q.push("0"):void 0===g[1]?q.push(""):q.push(g[1]),r.push(a[1]))});e=new Chart.MultiVarChart(e+2,p.vis,p.type,d,m[e],k,q);e.yHasString=!1;c=m.slice();c.unshift(a.data[0].category.split("|")[0]);c.unshift(a.data[0].type.split("|")[0]);
"crosstab"===p.vis&&(e.keys=c,e.minY=t,e.maxY=l,e.category=n,e.colorCriteria=r);p.chartData.push(e)});"function"==typeof p.customSort?p.customSort():p.sortData(p.sortBy);var u=new Chart.ChartPropertyCalculator(p.chartData);if("trellis"===p.vis)if("line"===p.type)h.indexOf(n)||(b=new Chart.LineChartRenderer(p.chartData,u),b.renderDiv=p.renderDiv,b.Chart_LineChartRenderer_prototype$createCaptions(p.renderDiv,p.caption,p.subCaption),b.Chart_LineChartRenderer_prototype$displayCharts(p.height,p.width));
else if("column"===p.type)h.indexOf(n)||(b=new Chart.ColumnChartRenderer(p.chartData,u),b.renderDiv=p.renderDiv,b.Chart_ColumnChartRenderer_prototype$createCaptions(p.renderDiv,p.caption,p.subCaption),b.Chart_ColumnChartRenderer_prototype$displayCharts(p.height,p.width));else if("bar"===p.type)h.indexOf(n)||(b=new Chart.BarChartRenderer(p.chartData,u),b.renderDiv=p.renderDiv,b.Chart_BarChartRenderer_prototype$createCaptions(p.renderDiv,p.caption,p.subCaption),b.Chart_BarChartRenderer_prototype$displayCharts(p.height,
p.width));else throw e="Chart type not supported in selected visualization type.",f=document.getElementById(p.renderDiv),f.innerHTML=e,{name:"ChartVisMismatchError",message:e,toString:function(){return this.name+": "+this.message}};else if("crosstab"===p.vis)if("bar"===p.type){b=new Chart.BarChartRenderer(p.chartData,u);b.renderDiv=p.renderDiv;b.plotColor=p.positiveColorStart;b.plotColorEnd=p.positiveColorEnd;b.negativeColor=p.negativeColorStart;b.negativeColorEnd=p.negativeColorEnd;b.totalRows=h.length;
var u=Math.floor((document.body.clientWidth-20)/c.length),x=Math.floor(window.innerHeight/h.length),y=c.length;110>x?x=110:300<x&&(x=300);v||b.displayHeaders(20,u-y,c);b.Chart_BarChartRenderer_prototype$displayCharts(x-25,u-y,h.indexOf(n));v===h.length-1&&b.drawX(50,u-y,c,d);v=document.getElementsByClassName("bar-plot");Array.from(v).map(function(a){g.push(a.getAttributeNS(null,"data-criteria"))});b.colorPlots(g)}else throw e="Chart type not supported in selected visualization type.",f=document.getElementById(p.renderDiv),
f.innerHTML=e,{name:"ChartVisMismatchError",message:e,toString:function(){return this.name+": "+this.message}};else throw e="Visualization type not supported.",f=document.getElementById(p.renderDiv),f.innerHTML=e,{name:"ChartVisError",message:e,toString:function(){return this.name+": "+this.message}};p.chartData=[]});(new Chart.EventAgents(this.type,this.vis)).crosshairHandler(document.getElementsByClassName("chart-svg"))};Chart.Data.prototype.sortData=function(a){switch(a){case "average":this.sortByAverage();
break;case "value":this.sortByValue();break;default:console.log("no sorting applied")}};Chart.Data.prototype.sortByAverage=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),c=b.next();!c.done;c=b.next()){for(var d=0,f=0,c=$jscomp.makeIterator(c.value.yData),e=c.next();!e.done;e=c.next())e=e.value,""!==e&&(d+=e,f++);a.push(d/f)}this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};Chart.Data.prototype.sortByValue=function(){for(var a=[],b=$jscomp.makeIterator(this.chartData),
c=b.next();!c.done;c=b.next())a.push(Math.max.apply(Math,c.value.yData));this.chartData=this.multiSort(a,this.chartData,this.sortOrder)};Chart.Data.prototype.multiSort=function(a,b,c){var d=[],f;for(f in b)d.push({sort:b[f],support:a[f]});"descending"==c?d.sort(function(a,b){return a.support>b.support?-1:a.support==b.support?0:1}):"ascending"==c&&d.sort(function(a,b){return a.support<b.support?-1:a.support==b.support?0:1});for(a=0;a<d.length;a++)b[a]=d[a].sort;return b}})();(function(){Chart.EventAgents=function(a,b){this.chartType=a;this.chartVis=b;this.svgHelper=new Chart.SvgHelper;document.getElementsByClassName("graphCircle")[0]&&(this.defaultAnchorStroke=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).stroke,this.defaultAnchorFill=getComputedStyle(document.getElementsByClassName("graphCircle")[0]).fill);document.getElementsByClassName("column-plot")[0]&&(this.defaultPlotFill=getComputedStyle(document.getElementsByClassName("column-plot")[0]).fill)};
Chart.EventAgents.prototype.createCrosshair=function(a){var b=a.target.getBoundingClientRect().left;a=new CustomEvent("crosshairCreateEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.createOtherCrosshairs=function(a){var b=Number(a.target.getAttributeNS(null,"height")),c=Number(a.target.getAttributeNS(null,"y"));b&&(c=this.svgHelper.drawLineByClass(a.detail,
c,a.detail,b+c,"otherCrosshair"),a.target.parentNode.insertBefore(c,a.target),c=this.svgHelper.drawRectByClass(a.detail,b,20,60,"otherTooltipBg"),c.setAttributeNS(null,"rx",2),c.setAttributeNS(null,"ry",2),c.style.visibility="hidden",a.target.parentNode.insertBefore(c,a.target),b=this.svgHelper.drawTextByClass(a.detail,b,"","otherTooltip"),b.style.visibility="hidden",a.target.parentNode.insertBefore(b,a.target))};Chart.EventAgents.prototype.moveCrosshair=function(a){var b=a.target.getBoundingClientRect().left;
a=new CustomEvent("crosshairMoveEvent",{detail:a.clientX-b+71});for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.moveOtherCrosshairs=function(a){var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("otherTooltipBg"),f=a.target.parentNode.getElementsByClassName("graphCircle"),
e=a.target.parentNode.getElementsByClassName("graphLine");getComputedStyle(f[0]);var g,h,m,k,q,r,n,l,t,p,w,v;b[0].setAttributeNS(null,"x1",a.detail-9);b[0].setAttributeNS(null,"x2",a.detail-9);p=b[0].getBoundingClientRect();r=b[0].getAttributeNS(null,"x1");n=b[0].getAttributeNS(null,"y1");l=b[0].getAttributeNS(null,"x2");t=b[0].getAttributeNS(null,"y2");if(b[0].getBoundingClientRect().left<f[0].getBoundingClientRect().left||b[0].getBoundingClientRect().right>f[f.length-1].getBoundingClientRect().right)c[0].style.visibility=
"hidden",d[0].style.visibility="hidden",f[0].style.stroke=this.defaultAnchorStroke,f[f.length-1].style.stroke=this.defaultAnchorStroke,f[0].setAttributeNS(null,"r",4),f[f.length-1].setAttributeNS(null,"r",4);else{for(var u=1;u<f.length;u++)g=e[u-1].getBoundingClientRect(),h=e[u-1].getAttributeNS(null,"x1"),m=e[u-1].getAttributeNS(null,"y1"),k=e[u-1].getAttributeNS(null,"x2"),q=e[u-1].getAttributeNS(null,"y2"),v=f[u].getAttributeNS(null,"data-value"),w=f[u-1].getAttributeNS(null,"data-value"),Chart.chartUtilities.isSvgColliding(g,
p)&&(g=Chart.chartUtilities.getLineIntersectionPoint(r,n,l,t,h,m,k,q),h=Chart.chartUtilities.getInterpolatedVal(h,w,k,v,g.x),c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",g.x+6),c[0].setAttributeNS(null,"y",g.y+20),c[0].textContent=h,d[0].style.visibility="initial",d[0].setAttributeNS(null,"x",g.x+4),d[0].setAttributeNS(null,"y",g.y+5),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6));for(u=0;u<f.length;u++)e=f[u].getBBox(),l=f[u].getBoundingClientRect(),r=a.target.getBoundingClientRect(),
n=b[0].getBoundingClientRect(),Chart.chartUtilities.isSvgColliding(l,n)?(c[0].style.visibility="initial",d[0].style.visibility="initial",n=e.x+e.width+5,t=e.x+e.width+3,l=e.y+2*e.height,p=e.y+e.height-3,n+e.width+r.left>r.right&&(n-=5*e.width-5,t-=5*e.width-5),c[0].setAttributeNS(null,"x",n),c[0].setAttributeNS(null,"y",l+3),c[0].textContent=f[u].getAttributeNS(null,"data-value"),f[u].setAttributeNS(null,"r",5),f[u].style.stroke="#f15c5c",d[0].setAttributeNS(null,"x",t),d[0].setAttributeNS(null,"y",
p),d[0].setAttributeNS(null,"width",c[0].getComputedTextLength()+6)):(f[u].setAttributeNS(null,"r",4),f[u].style.stroke=this.defaultAnchorStroke)}};Chart.EventAgents.prototype.removeCrosshair=function(a){a=new Event("crosshairRemoveEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-rect")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.removeOtherCrosshairs=function(a){for(var b=a.target.parentNode.getElementsByClassName("otherCrosshair"),
c=a.target.parentNode.getElementsByClassName("otherTooltip"),d=a.target.parentNode.getElementsByClassName("graphCircle"),f=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),e=b.next();!e.done;e=b.next())a.target.parentNode.removeChild(e.value);d=$jscomp.makeIterator(d);for(b=d.next();!b.done;b=d.next())b=b.value,b.style.stroke=this.defaultAnchorStroke,b.setAttributeNS(null,"r",4);c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())a.target.parentNode.removeChild(d.value);
f=$jscomp.makeIterator(f);for(c=f.next();!c.done;c=f.next())a.target.parentNode.removeChild(c.value)};Chart.EventAgents.prototype.prepPlot=function(a){var b=a.target.getBoundingClientRect().left,c=a.target.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x"),f=a.target.getAttributeNS(null,"y");a=new CustomEvent("plotLightEvent",{detail:{mousex:a.clientX-b+62,mousey:a.clientY-c+3,hoveredPlotX:d,hoveredPlotY:f}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=
b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.prepAllPlots=function(a){var b;b=Math.floor(1E3*Number(a.detail.hoveredPlotX))/1E3;var c=Math.floor(1E3*Number(a.detail.hoveredPlotY))/1E3,d=Math.floor(1E3*a.target.getBBox().x)/1E3,f=Math.floor(1E3*a.target.getBBox().y)/1E3;"bar"!==this.chartType&&d==b?a.target.style.fill="#b94748":"bar"===this.chartType&&f==c&&(a.target.style.fill="#b94748");b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,20,60,"otherTooltipBg");
b.setAttributeNS(null,"rx",2);b.setAttributeNS(null,"ry",2);b.style.visibility="hidden";a.target.parentNode.appendChild(b);b=this.svgHelper.drawTextByClass(a.detail.mousex,a.detail.mousey,"","otherTooltip");a.target.parentNode.appendChild(b)};Chart.EventAgents.prototype.prepTooltips=function(a){var b=a.target.parentNode.getBoundingClientRect().left,c=a.target.parentNode.getBoundingClientRect().top,d=a.target.getAttributeNS(null,"x"),f=a.target.getAttributeNS(null,"y");a=new CustomEvent("tooltipMoveEvent",
{detail:{mousex:a.clientX-b-15,mousey:a.clientY-c+15,hoveredPlotX:d,hoveredPlotY:f}});b=$jscomp.makeIterator(document.getElementsByClassName("column-plot"));for(c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.moveTooltips=function(a){var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg"),d=Math.floor(1E3*Number(a.detail.hoveredPlotX))/1E3,f=Math.floor(1E3*Number(a.detail.hoveredPlotY))/1E3,
e=Math.floor(1E3*a.target.getBBox().x)/1E3,g=Math.floor(1E3*a.target.getBBox().y)/1E3;"bar"!==this.chartType&&e==d?(c[0].style.visibility="initial",c[0].setAttributeNS(null,"x",a.detail.mousex),c[0].setAttributeNS(null,"y",a.detail.mousey),b[0].textContent=a.target.getAttributeNS(null,"data-value"),b[0].setAttributeNS(null,"x",a.detail.mousex+5),b[0].setAttributeNS(null,"y",a.detail.mousey+15),c[0].setAttributeNS(null,"width",b[0].getComputedTextLength()+10)):"bar"===this.chartType&&g==f&&(c[0].style.visibility=
"initial",c[0].setAttributeNS(null,"x",a.detail.mousex),c[0].setAttributeNS(null,"y",a.detail.mousey),b[0].textContent=a.target.getAttributeNS(null,"data-value"),b[0].setAttributeNS(null,"x",a.detail.mousex+5),b[0].setAttributeNS(null,"y",a.detail.mousey+15),c[0].setAttributeNS(null,"width",b[0].getComputedTextLength()+10))};Chart.EventAgents.prototype.unprepPlot=function(a){a=new Event("unprepPlotEvent");for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=
b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.unprepAllPlots=function(a){"rgb(185, 71, 72)"===a.target.style.fill&&(a.target.style.fill=this.defaultPlotFill);for(var b=a.target.parentNode.getElementsByClassName("otherTooltip"),c=a.target.parentNode.getElementsByClassName("otherTooltipBg"),b=$jscomp.makeIterator(b),d=b.next();!d.done;d=b.next())a.target.parentNode.removeChild(d.value);c=$jscomp.makeIterator(c);for(b=c.next();!b.done;b=c.next())a.target.parentNode.removeChild(b.value)};
Chart.EventAgents.prototype.dragSelect=function(a){var b=a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customDragSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};Chart.EventAgents.prototype.customDragSelect=function(a){for(var b=$jscomp.makeIterator(document.getElementsByClassName("column-plot")),c=b.next();!c.done;c=
b.next())c.value.style.fill=this.defaultPlotFill;b=$jscomp.makeIterator(document.getElementsByClassName("graphCircle"));for(c=b.next();!c.done;c=b.next())c.value.style.fill=this.defaultAnchorFill;a.target.onmousemove=this.expandSelect;a.target.onmouseup=this.selectPlots;b=this.svgHelper.drawRectByClass(a.detail.mousex,a.detail.mousey,5,5,"select-box");b.setAttributeNS(null,"fill","red");b.setAttributeNS(null,"fill-opacity",.4);a.target.appendChild(b)};Chart.EventAgents.prototype.expandSelect=function(a){var b=
a.target.parentNode,c=b.getBoundingClientRect().left,b=b.getBoundingClientRect().top;a=new CustomEvent("customExpandSelect",{detail:{mousex:a.clientX-c,mousey:a.clientY-b}});c=$jscomp.makeIterator(document.getElementsByClassName("chart-svg"));for(b=c.next();!b.done;b=c.next())b.value.dispatchEvent(a)};Chart.EventAgents.prototype.customExpandSelect=function(a){var b=a.target.parentNode;b.getBoundingClientRect();for(var b=b.getElementsByClassName("select-box"),c=a.target.parentNode.getElementsByClassName("column-plot"),
d=a.target.parentNode.getElementsByClassName("graphCircle"),f=$jscomp.makeIterator(b),e=f.next();!e.done;e=f.next()){e=e.value;e.setAttributeNS(null,"width",a.detail.mousex);e.setAttributeNS(null,"height",a.detail.mousey);for(var e=$jscomp.makeIterator(c),g=e.next();!g.done;g=e.next())g=g.value,Chart.chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),g.getBoundingClientRect())&&(g.style.fill="#b94749");e=$jscomp.makeIterator(d);for(g=e.next();!g.done;g=e.next())g=g.value,Chart.chartUtilities.isSvgColliding(b[0].getBoundingClientRect(),
g.getBoundingClientRect())&&(g.style.fill="#b94749")}};Chart.EventAgents.prototype.selectPlots=function(a){a=new Event("customSelectPlots");for(var b=$jscomp.makeIterator(document.getElementsByClassName("chart-svg")),c=b.next();!c.done;c=b.next())c.value.dispatchEvent(a)};Chart.EventAgents.prototype.customSelectPlots=function(a){a.target.onmouseup=null;a.target.onmousemove=null;var b=document.getElementsByClassName("select-box");a.target.removeChild(b[0])};Chart.EventAgents.prototype.crosshairHandler=
function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;if("column"===this.chartType||"bar"===this.chartType)for(var c=$jscomp.makeIterator(b.getElementsByClassName("column-plot")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.prepPlot),d.addEventListener("plotLightEvent",this.prepAllPlots.bind(this)),d.addEventListener("mousemove",this.prepTooltips),d.addEventListener("tooltipMoveEvent",this.moveTooltips.bind(this)),d.addEventListener("mouseleave",
this.unprepPlot),d.addEventListener("unprepPlotEvent",this.unprepAllPlots.bind(this));else if("line"===this.chartType)for(c=$jscomp.makeIterator(b.getElementsByClassName("chart-rect")),d=c.next();!d.done;d=c.next())d=d.value,d.addEventListener("mouseenter",this.createCrosshair),d.addEventListener("crosshairCreateEvent",this.createOtherCrosshairs.bind(this)),d.addEventListener("mousemove",this.moveCrosshair),d.addEventListener("crosshairMoveEvent",this.moveOtherCrosshairs.bind(this)),d.addEventListener("mouseleave",
this.removeCrosshair),d.addEventListener("crosshairRemoveEvent",this.removeOtherCrosshairs.bind(this));"crosstab"!==this.chartVis&&(b.addEventListener("mousedown",this.dragSelect),b.addEventListener("customDragSelect",this.customDragSelect.bind(this)),b.addEventListener("customExpandSelect",this.customExpandSelect.bind(this)),b.addEventListener("customSelectPlots",this.customSelectPlots.bind(this)))}}})();(function(){Chart.LineChartRenderer=function(a,b){this.Chart_LineChartRenderer$charts=a;this.Chart_LineChartRenderer$chartProperties=b};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$displayCharts=function(a,b){var c=Infinity,d=-Infinity,f=Math.floor(window.innerWidth/(b+55));f>this.Chart_LineChartRenderer$charts.length&&(f=this.Chart_LineChartRenderer$charts.length);for(var e=0;e<this.Chart_LineChartRenderer$charts.length;e++){for(var g=e;g<f;g++){var h=Math.max.apply(Math,this.Chart_LineChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMaxMapper)),
m=Math.min.apply(Math,this.Chart_LineChartRenderer$charts[g].yData.map(Chart.chartUtilities.nullMinMapper));h>d&&(d=h);m<c&&(c=m)}if(Infinity!==c||-Infinity!==d)this.Chart_LineChartRenderer$charts[e].yTicks=this.Chart_LineChartRenderer$chartProperties.calculateYAxis(c,d),this.Chart_LineChartRenderer$charts[e].xTicks=this.Chart_LineChartRenderer$chartProperties.calculateYAxis(0,this.Chart_LineChartRenderer$charts[e].xData.length),this.Chart_LineChartRenderer_prototype$createDivs(this.renderDiv)}this.Chart_LineChartRenderer_prototype$createCharts(this.Chart_LineChartRenderer$charts,
a,b)};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$createDivs=function(a){var b=document.createElement("div");b.setAttribute("class","multi-chart");b.style.display="inline";document.getElementById(a).appendChild(b)};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$createCaptions=function(a,b,c){var d=document.createElement("h1");d.setAttribute("class","caption");a=document.getElementById(a);d.innerHTML=b;a.appendChild(d);b=document.createElement("h2");b.setAttribute("class",
"sub-caption");b.innerHTML=c;a.appendChild(b)};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$drawCompleteCharts=function(a,b,c,d,f,e,g,h,m){var k=Math.ceil(g-.001*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.2*g)+55;g=Math.floor(0+.025*g)+55;var r=k-h,n=q-g,l=this.Chart_LineChartRenderer$chartProperties.dataMapper(r,n,h,g,b[a]);[].push(l);var t=new Chart.YAxis(g,h-55,g,k-55,"yAxis",m);t.render(e);t.renderTicks(e,l.yTicks);a%d||t.renderTickValues(e,l.yTicks,b[a].yTicks);t.renderDivs(e,
l.yTicks,r,g,n);m=new Chart.XAxis(q,k-55,g,k-55,"xAxis",m);m.render(e);m.renderTicks(e,l.xTicks);a>=c.length-d&&m.renderTickValues(e,l.xTicks,b[a].xData);c=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";c=f.drawTextByClass(q/2-c.length,h-55-20,c,"y-title");d=f.drawRectByClass(g,h-55-40,30,n,"y-title-rect");e.appendChild(d);e.appendChild(c);for(c=0;c<l.yData.length-1;c++)if(d=0,""!==l.yData[c+1]&&""!==l.yData[c])d=f.drawLineByClass(l.xData[c]+g,r-l.yData[c]+h-55,l.xData[c+1]+g,r-l.yData[c+
1]+h-55,"graphLine"),e.appendChild(d);else if(""!==l.yData[c])for(q=c+2;q<l.yData.length;q++)if(c++,d++,""!==l.yData[q]){d=f.drawLineByClass(l.xData[c-d]+g,r-l.yData[c-d]+h-55,l.xData[q]+g,r-l.yData[q]+h-55,"graphLine inferredLine");e.appendChild(d);break}for(c=0;c<l.yData.length;c++)""!==l.yData[c]&&(d=f.drawCircleByClass(l.xData[c]+g,r-l.yData[c]+h-55,4,"graphCircle"),d.setAttributeNS(null,"data-value",b[a].yData[c]),e.appendChild(d));a=f.drawRectByClass(g,h-55,r,n,"chart-rect");a.setAttributeNS(null,
"fill-opacity",0);e.appendChild(a)};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$drawIncompleteCharts=function(a,b,c,d,f,e,g,h,m){var k=Math.ceil(g-.095*g)+55,q=Math.ceil(h-.025*h)+55;h=Math.floor(0+.025*g)+55;g=Math.floor(0+.025*g)+55;c=k-h;var r=q-g,n=this.Chart_LineChartRenderer$chartProperties.dataMapper(c,r,h,g,b[a]);[].push(n);var l=new Chart.YAxis(g,h-15,g,k-15,"yAxis",m);l.render(e);l.renderTicks(e,n.yTicks);a%d||l.renderTickValues(e,n.yTicks,b[a].yTicks);l.renderDivs(e,
n.yTicks,c,g,r);m=new Chart.XAxis(q,h-15,g,h-15,"xAxis",m);m.render(e);m.renderTicks(e,n.xTicks);a<d&&m.renderTickValues(e,n.xTicks,b[a].xData);d=f.drawRectByClass(g,k-7,30,r,"y-title-rect");e.appendChild(d);d=""===b[a].yUnit?b[a].yTitle:b[a].yTitle+" ("+b[a].yUnit+")";k=f.drawTextByClass(q/2-d.length,k+15,d,"y-title");e.appendChild(k);for(k=0;k<n.yData.length-1;k++)if(d=0,""!==n.yData[k+1]&&""!==n.yData[k])d=f.drawLineByClass(n.xData[k]+g,c-n.yData[k]+h-15,n.xData[k+1]+g,c-n.yData[k+1]+h-15,"graphLine"),
e.appendChild(d);else if(""!==n.yData[k])for(q=k+2;q<n.yData.length;q++)if(k++,d++,""!==n.yData[q]){d=f.drawLineByClass(n.xData[k-d]+g,c-n.yData[k-d]+h-15,n.xData[q]+g,c-n.yData[q]+h-15,"graphLine inferredLine");e.appendChild(d);break}for(k=0;k<n.yData.length;k++)""!==n.yData[k]&&(d=f.drawCircleByClass(n.xData[k]+g,c-n.yData[k]+h-15,4,"graphCircle"),d.setAttributeNS(null,"data-value",b[a].yData[k]),e.appendChild(d));a=f.drawRectByClass(g,h-15,c,r,"chart-rect");a.setAttributeNS(null,"fill-opacity",
0);e.appendChild(a)};Chart.LineChartRenderer.prototype.Chart_LineChartRenderer_prototype$createCharts=function(a,b,c){var d,f=new Chart.SvgHelper,e=Math.floor(window.innerWidth/(c+55)),g=document.getElementsByClassName("multi-chart");e>g.length&&(e=g.length);d=g.length%e?!1:!0;for(var h=0;h<g.length;h++){var m=f.createSvgByClass(b+55,c+55,"chart-svg");d?this.Chart_LineChartRenderer_prototype$drawCompleteCharts(h,a,g,e,f,m,b,c,d):this.Chart_LineChartRenderer_prototype$drawIncompleteCharts(h,a,g,e,
f,m,b,c,d);g[h].appendChild(m);for(var m=m.getElementsByClassName("x-value"),k=0;k<m.length;k++){var q=f.getRotationPoint(m[k]);m[k].setAttributeNS(null,"transform","rotate(270 "+q+")")}}}})();(function(){Chart.MappedChart=function(a,b,c,d,f,e,g){this.index=a;this.xTitle=b;this.yTitle=c;this.xData=d;this.yData=f;this.yTicks=e;this.xTicks=g}})();(function(){Chart.MultiVarChart=function(a,b,c,d,f,e,g,h,m){this.index=a;this.vis=b;this.type=c;this.xTitle=d;this.yTitle=f;this.xData=e;this.yData=g;this.xUnit=h?h:"";this.yUnit=m?m:""}})();(function(){Chart.SvgHelper=function(){this.svgns="http://www.w3.org/2000/svg"};Chart.SvgHelper.prototype.createSvgByClass=function(a,b,c){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"height",a+"px");d.setAttributeNS(null,"width",b+"px");d.setAttributeNS(null,"version","1.1");d.setAttributeNS(null,"class",c);return d};Chart.SvgHelper.prototype.drawLineByClass=function(a,b,c,d,f){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttributeNS(null,
"x1",a);e.setAttributeNS(null,"y1",b);e.setAttributeNS(null,"x2",c);e.setAttributeNS(null,"y2",d);e.setAttributeNS(null,"stroke","black");e.setAttributeNS(null,"class",f);return e};Chart.SvgHelper.prototype.drawTextByClass=function(a,b,c,d){var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttributeNS(null,"x",a);f.setAttributeNS(null,"y",b);f.setAttributeNS(null,"class",d);f.setAttributeNS(null,"stroke","black");f.textContent=c;return f};Chart.SvgHelper.prototype.drawRectByClass=
function(a,b,c,d,f){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttributeNS(null,"x",a);e.setAttributeNS(null,"y",b);e.setAttributeNS(null,"height",c);e.setAttributeNS(null,"width",d);e.setAttributeNS(null,"class",f);e.setAttributeNS(null,"fill","white");return e};Chart.SvgHelper.prototype.drawCircleByClass=function(a,b,c,d){var f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.setAttributeNS(null,"cx",a);f.setAttributeNS(null,"cy",b);f.setAttributeNS(null,
"r",c+"px");f.setAttributeNS(null,"class",d);return f};Chart.SvgHelper.prototype.getRotationPoint=function(a){a=a.getBBox();return a.x+14+", "+(a.y+a.height/2)}})();(function(){Chart.XAxis=function(a,b,c,d,f,e){Chart.Axis.call(this,a,b,c,d,f,e)};Chart.chartUtilities.inheritsFrom(Chart.XAxis,Chart.Axis);Chart.XAxis.prototype.renderTicks=function(a,b){var c;b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,c=this.columnsAreComplete?this.svgHelper.drawLineByClass(c,this.startY,c,this.endY+5,"xTick"):this.svgHelper.drawLineByClass(c,this.startY-5,c,this.startY,"xTick"),a.appendChild(c)};Chart.XAxis.prototype.renderTickValues=function(a,b,c){var d,
f=$jscomp.makeIterator(b);for(d=f.next();!d.done;d=f.next()){d=d.value;var e=c[b.indexOf(d)];d=this.columnsAreComplete?"crosstabs"===this.chartVis?b.indexOf(d)===b.length-1?this.svgHelper.drawTextByClass(d-13,this.startY+22,"","x-value"):this.svgHelper.drawTextByClass(d-13,this.startY+22,e,"x-value"):this.svgHelper.drawTextByClass(d-13,this.startY+32,e,"x-value"):this.svgHelper.drawTextByClass(d-13,this.startY-23,e,"x-value");a.appendChild(d)}}})();(function(){Chart.YAxis=function(a,b,c,d,f,e){Chart.Axis.call(this,a,b,c,d,f,e)};Chart.chartUtilities.inheritsFrom(Chart.YAxis,Chart.Axis);Chart.YAxis.prototype.renderTicks=function(a,b){var c;b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,c=this.columnsAreComplete?this.svgHelper.drawLineByClass(this.startX-5,c-55,this.endX,c-55,"yTick"):this.svgHelper.drawLineByClass(this.startX-5,c-15,this.endX,c-15,"yTick"),a.appendChild(c)};Chart.YAxis.prototype.renderTickValues=function(a,
b,c){var d,f=$jscomp.makeIterator(b);for(d=f.next();!d.done;d=f.next()){d=d.value;var e=c[b.indexOf(d)],e=Chart.chartUtilities.shortenLargeNumber(e,2);d=this.columnsAreComplete?"category"===this.type?this.svgHelper.drawTextByClass(45,d-55+5,e,"y-value"):this.svgHelper.drawTextByClass(45,this.endY+this.startY-d+60,e,"y-value"):this.svgHelper.drawTextByClass(50,this.endY+this.startY-d+20,e,"y-value");d.setAttributeNS(null,"text-anchor","end");a.appendChild(d)}};Chart.YAxis.prototype.renderDivs=function(a,
b,c,d,f){var e,g=$jscomp.makeIterator(b);for(e=g.next();!e.done;e=g.next())e=e.value,e=this.columnsAreComplete?this.svgHelper.drawRectByClass(d,e-55,c-e+b[0],f,"yDiv"):this.svgHelper.drawRectByClass(d,e-15,c-e+b[0],f,"yDiv"),a.appendChild(e)};Chart.YAxis.prototype.renderZeroPlane=function(a,b,c,d){var f,e=$jscomp.makeIterator(b);for(f=e.next();!f.done;f=e.next())f=f.value,0==c[b.indexOf(f)]&&(f=this.columnsAreComplete?this.svgHelper.drawLineByClass(this.startX,this.endY+this.startY-f+55,this.startX+
d,this.endY+this.startY-f+55,"zeroPlane"):this.svgHelper.drawLineByClass(this.startX,this.endY+this.startY-f+15,this.startX+d,this.endY+this.startY-f+15,"zeroPlane"),f.setAttributeNS(null,"stroke-opacity",100),a.appendChild(f))}})();

//# sourceMappingURL=chart.min.js.map
